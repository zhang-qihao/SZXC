{"remainingRequest":"C:\\Users\\10415\\Desktop\\0工程\\5Vue\\SZYBGZDTGL-avue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\10415\\Desktop\\0工程\\5Vue\\SZYBGZDTGL-avue\\src\\views\\szybgzdtgl\\baseinfo\\ks\\ksdetail.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\10415\\Desktop\\0工程\\5Vue\\SZYBGZDTGL-avue\\src\\views\\szybgzdtgl\\baseinfo\\ks\\ksdetail.vue","mtime":1660875518897},{"path":"C:\\Users\\10415\\Desktop\\0工程\\5Vue\\SZYBGZDTGL-avue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\10415\\Desktop\\0工程\\5Vue\\SZYBGZDTGL-avue\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\10415\\Desktop\\0工程\\5Vue\\SZYBGZDTGL-avue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\10415\\Desktop\\0工程\\5Vue\\SZYBGZDTGL-avue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport {BaseCtrl} from '/src/util/eframe';\r\nimport printJS from 'print-js'\r\nimport {\r\n  mapGetters\r\n} from \"vuex\";\r\nimport constData from \"../../../../const\";\r\n\r\nexport default {\r\n  name: \"ksdetail\",\r\n  mixins: [BaseCtrl],\r\n  computed: {\r\n    ...mapGetters([\"userInfo\",]),\r\n  },\r\n  data() {\r\n    const validateID = (rule, value, callback) => {\r\n      if (cardid(value)[0]) {\r\n        callback(new Error(cardid(value)[1]));\r\n      } else {\r\n        this.form.aac006 = value.substr(6, 8);\r\n        callback();\r\n      }\r\n      //  callback(new Error(\"请输入4位数的验证码\"));\r\n      //alert(1);\r\n    };\r\n    return {\r\n      compAccept: 'jpg,png',\r\n      compValueList: [],\r\n      title1: '科室综合信息详情',    //弹窗标题\r\n      onrequire: false,\r\n\r\n      form: { // 页面数据表单\r\n        ks001: '',  // 科室id\r\n        ks003: '',  // 科室名称\r\n        ks020: '',  // 科室负责人\r\n        ks010: '',  // 分管主任\r\n        pernum: '', // 科室人数\r\n        ks002: '',  //科室职责\r\n      }\r\n    };\r\n  },\r\n\r\n  created() {\r\n    this.loadData()\r\n  },\r\n\r\n  mounted() {\r\n    this.$nextTick(() => {\r\n      this.$refs['grid1'].setInitFun((queryGrid) => {\r\n        this.doQuery()\r\n      });\r\n    });\r\n  },\r\n\r\n  methods: {\r\n\r\n    loadData() {\r\n      //获取传递参数\r\n      let params = this.$attrs.params.dataItem;\r\n      if (params) {\r\n        if (params.get('KS001')) {\r\n          this.form.ks001 = params.get('KS001');\r\n        }\r\n        if (params.get('KS003')) {\r\n          this.form.ks003 = params.get('KS003');\r\n        }\r\n        if (params.get('KS010')) {\r\n          this.form.ks010 = params.get('KS010');\r\n        }\r\n        if (params.get('KS020')) {\r\n          this.form.ks020 = params.get('KS020');\r\n        }\r\n        if (params.get('PERNUM')) {\r\n          this.form.pernum = params.get('PERNUM');\r\n        }\r\n        if (params.get('KS002')) {\r\n          this.form.ks002 = params.get('KS002');\r\n        }\r\n      }\r\n    },\r\n\r\n    doQuery() {\r\n      let that = this;\r\n      let whereCondition = \"1=1\";\r\n      let ks001 = that.form.ks001\r\n\r\n      if (ks001 !== null && ks001 !== \"\") {\r\n        whereCondition += \" and KS001 = '\" + ks001 + \"'\";\r\n      }\r\n\r\n      let queryGrid = this.$refs['grid1'].getWidget();\r\n      queryGrid.selectAll = function (e, grid) {\r\n        console.log(\"selectAll\");\r\n      };\r\n      queryGrid.selectRow = function (e, dataItem, grid, row) {\r\n        console.log(\"selectRole\" + dataItem.QUERYNO);\r\n      };\r\n      queryGrid.doRefresh({\r\n        whereCondition: whereCondition,\r\n        parameters: {\r\n          ac01id: that.form.ac01id\r\n        }\r\n      });\r\n    },\r\n\r\n\r\n    printTable() {  // 打印表格\r\n\r\n      let succFun = function (data) {\r\n        console.log(data)\r\n        printJS({\r\n          printable: data,\r\n          type: 'json',\r\n          properties: [{\r\n            field: 'ks003',\r\n            displayName: '岗位名称',\r\n            columnSize: 1\r\n          }, {\r\n            field: 'ks002',\r\n            displayName: '岗位职责描述',\r\n            columnSize: 3\r\n          }, {\r\n            field: 'aac003',\r\n            displayName: '工作人员',\r\n            columnSize: 1\r\n          }, {\r\n            field: 'aac004',\r\n            displayName: '人员性别',\r\n            columnSize: 1\r\n          }, {\r\n            field: 'aac039',\r\n            displayName: '人员性质',\r\n            columnSize: 1\r\n          }, {\r\n            field: 'aac029',\r\n            displayName: '政治面貌',\r\n            columnSize: 1\r\n          }],\r\n          header: this.form.ks003 + '科岗职责说明书',\r\n          //样式设置\r\n          gridStyle: 'border:2px; color:black',\r\n          gridHeaderStyle: 'color:black; border:2px;',\r\n          headerStyle: 'text-align:center;color:#000;width:100%;',\r\n        })\r\n      };\r\n      let failFun = function (data) {\r\n        alert('获取数据失败')\r\n      };\r\n      this.$eframe.submitTargetForm({\r\n        url: '/szybgzdtgl/module/view/szybgzdtgl/baseinfo/ks/getPrintData.action',\r\n        form: {ks001: this.form.ks001},\r\n        actionFunName: \"getData\",\r\n        succFun: succFun,\r\n        failFun: failFun,\r\n      });\r\n    }\r\n  }\r\n}\r\n",{"version":3,"sources":["ksdetail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0EA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ksdetail.vue","sourceRoot":"src/views/szybgzdtgl/baseinfo/ks","sourcesContent":["<template>\r\n  <el-container style=\"height: 100%;height: 600px\">\r\n    <!--    页头-->\r\n    <el-header>\r\n      <div class=\"header-left\">\r\n        <div class=\"header-title\" slot=\"title\" style=\"color: #0eb1a1\">{{ title1 }}</div>\r\n      </div>\r\n      <div class=\"header-right\"/>\r\n    </el-header>\r\n\r\n    <!--    主视图-->\r\n    <el-main style=\"height: calc(100% - 37px);overflow: auto;\">\r\n      <div class=\"main-content\">\r\n        <!--        科室基础信息块-->\r\n        <base-block class=\"out-block\" rounded ref=\"exampleBlock2\">\r\n          <div class=\"header-title\" slot=\"title\">科室基础信息</div>\r\n\r\n          <el-form ref=\"form\" :model=\"form\" label-position=\"left\" label-width=\"auto\">\r\n\r\n\r\n            <el-row :gutter=\"24\">\r\n              <el-col :span=\"8\">\r\n                <ef-text label=\"科室名称\" name=\"ks003\" v-model=\"form.ks003\" :require=\"false\" readonly=\"true\"/>\r\n              </el-col>\r\n              <el-col :span=\"8\">\r\n                <ef-text label=\"科室负责人\" name=\"ks020\" v-model=\"form.ks020\" :require=\"false\" readonly=\"true\"/>\r\n              </el-col>\r\n              <el-col :span=\"8\">\r\n                <ef-text label=\"分管主任\" name=\"ks010\" v-model=\"form.ks010\" :require=\"false\" readonly=\"true\"/>\r\n              </el-col>\r\n            </el-row>\r\n\r\n            <el-row :gutter=\"24\">\r\n              <el-col :span=\"8\">\r\n                <ef-text label=\"科室人数\" name=\"pernum\" v-model=\"form.pernum\" :require=\"false\" readonly=\"true\"/>\r\n              </el-col>\r\n            </el-row>\r\n\r\n            <el-row :gutter=\"24\">\r\n              <el-col :span=\"24\">\r\n                <ef-text label=\"科室职责\" name=\"ks002\" v-model=\"form.ks002\" :require=\"false\" readonly=\"true\"/>\r\n              </el-col>\r\n            </el-row>\r\n\r\n\r\n          </el-form>\r\n        </base-block><!--科室基础信息块-->\r\n\r\n\r\n        <!--        科室岗位信息块-->\r\n        <base-block class=\"out-block\" style=\"margin-top: 15px\" ref=\"exampleBlock2\">\r\n          <div class=\"header-title\" slot=\"title\">科室岗位信息</div>\r\n          <div class=\"header-right\">\r\n            <el-button-group>\r\n              <el-button size=\"mini\" type=\"primary\" @click=\"printTable\">打印</el-button> <!--v-print=\"'#printMe'\"-->\r\n            </el-button-group>\r\n          </div>\r\n          <div id=\"printMe\">\r\n            <el-form ref=\"form\" :model=\"form\" label-position=\"left\" label-width=\"auto\">\r\n              <el-form ref=\"form\" :model=\"form\" label-position=\"left\" label-width=\"auto\">\r\n                <ef-page-grid style=\"margin-top: 10px\" ref=\"grid1\" queryNo=\"Query_KSZH_02\" pageSize=\"5\"\r\n                              queryWindow=\"1\"/>\r\n              </el-form>\r\n            </el-form>\r\n          </div>\r\n        </base-block><!--科室岗位信息块-->\r\n\r\n\r\n      </div>\r\n    </el-main>\r\n  </el-container>\r\n</template>\r\n\r\n<script>\r\nimport {BaseCtrl} from '/src/util/eframe';\r\nimport printJS from 'print-js'\r\nimport {\r\n  mapGetters\r\n} from \"vuex\";\r\nimport constData from \"../../../../const\";\r\n\r\nexport default {\r\n  name: \"ksdetail\",\r\n  mixins: [BaseCtrl],\r\n  computed: {\r\n    ...mapGetters([\"userInfo\",]),\r\n  },\r\n  data() {\r\n    const validateID = (rule, value, callback) => {\r\n      if (cardid(value)[0]) {\r\n        callback(new Error(cardid(value)[1]));\r\n      } else {\r\n        this.form.aac006 = value.substr(6, 8);\r\n        callback();\r\n      }\r\n      //  callback(new Error(\"请输入4位数的验证码\"));\r\n      //alert(1);\r\n    };\r\n    return {\r\n      compAccept: 'jpg,png',\r\n      compValueList: [],\r\n      title1: '科室综合信息详情',    //弹窗标题\r\n      onrequire: false,\r\n\r\n      form: { // 页面数据表单\r\n        ks001: '',  // 科室id\r\n        ks003: '',  // 科室名称\r\n        ks020: '',  // 科室负责人\r\n        ks010: '',  // 分管主任\r\n        pernum: '', // 科室人数\r\n        ks002: '',  //科室职责\r\n      }\r\n    };\r\n  },\r\n\r\n  created() {\r\n    this.loadData()\r\n  },\r\n\r\n  mounted() {\r\n    this.$nextTick(() => {\r\n      this.$refs['grid1'].setInitFun((queryGrid) => {\r\n        this.doQuery()\r\n      });\r\n    });\r\n  },\r\n\r\n  methods: {\r\n\r\n    loadData() {\r\n      //获取传递参数\r\n      let params = this.$attrs.params.dataItem;\r\n      if (params) {\r\n        if (params.get('KS001')) {\r\n          this.form.ks001 = params.get('KS001');\r\n        }\r\n        if (params.get('KS003')) {\r\n          this.form.ks003 = params.get('KS003');\r\n        }\r\n        if (params.get('KS010')) {\r\n          this.form.ks010 = params.get('KS010');\r\n        }\r\n        if (params.get('KS020')) {\r\n          this.form.ks020 = params.get('KS020');\r\n        }\r\n        if (params.get('PERNUM')) {\r\n          this.form.pernum = params.get('PERNUM');\r\n        }\r\n        if (params.get('KS002')) {\r\n          this.form.ks002 = params.get('KS002');\r\n        }\r\n      }\r\n    },\r\n\r\n    doQuery() {\r\n      let that = this;\r\n      let whereCondition = \"1=1\";\r\n      let ks001 = that.form.ks001\r\n\r\n      if (ks001 !== null && ks001 !== \"\") {\r\n        whereCondition += \" and KS001 = '\" + ks001 + \"'\";\r\n      }\r\n\r\n      let queryGrid = this.$refs['grid1'].getWidget();\r\n      queryGrid.selectAll = function (e, grid) {\r\n        console.log(\"selectAll\");\r\n      };\r\n      queryGrid.selectRow = function (e, dataItem, grid, row) {\r\n        console.log(\"selectRole\" + dataItem.QUERYNO);\r\n      };\r\n      queryGrid.doRefresh({\r\n        whereCondition: whereCondition,\r\n        parameters: {\r\n          ac01id: that.form.ac01id\r\n        }\r\n      });\r\n    },\r\n\r\n\r\n    printTable() {  // 打印表格\r\n\r\n      let succFun = function (data) {\r\n        console.log(data)\r\n        printJS({\r\n          printable: data,\r\n          type: 'json',\r\n          properties: [{\r\n            field: 'ks003',\r\n            displayName: '岗位名称',\r\n            columnSize: 1\r\n          }, {\r\n            field: 'ks002',\r\n            displayName: '岗位职责描述',\r\n            columnSize: 3\r\n          }, {\r\n            field: 'aac003',\r\n            displayName: '工作人员',\r\n            columnSize: 1\r\n          }, {\r\n            field: 'aac004',\r\n            displayName: '人员性别',\r\n            columnSize: 1\r\n          }, {\r\n            field: 'aac039',\r\n            displayName: '人员性质',\r\n            columnSize: 1\r\n          }, {\r\n            field: 'aac029',\r\n            displayName: '政治面貌',\r\n            columnSize: 1\r\n          }],\r\n          header: this.form.ks003 + '科岗职责说明书',\r\n          //样式设置\r\n          gridStyle: 'border:2px; color:black',\r\n          gridHeaderStyle: 'color:black; border:2px;',\r\n          headerStyle: 'text-align:center;color:#000;width:100%;',\r\n        })\r\n      };\r\n      let failFun = function (data) {\r\n        alert('获取数据失败')\r\n      };\r\n      this.$eframe.submitTargetForm({\r\n        url: '/szybgzdtgl/module/view/szybgzdtgl/baseinfo/ks/getPrintData.action',\r\n        form: {ks001: this.form.ks001},\r\n        actionFunName: \"getData\",\r\n        succFun: succFun,\r\n        failFun: failFun,\r\n      });\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n</style>"]}]}