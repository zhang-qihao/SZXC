{"remainingRequest":"C:\\Users\\10415\\Desktop\\0工程\\5Vue\\SZYBGZDTGL-avue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\10415\\Desktop\\0工程\\5Vue\\SZYBGZDTGL-avue\\src\\page\\index\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\10415\\Desktop\\0工程\\5Vue\\SZYBGZDTGL-avue\\src\\page\\index\\index.vue","mtime":1658977808619},{"path":"C:\\Users\\10415\\Desktop\\0工程\\5Vue\\SZYBGZDTGL-avue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\10415\\Desktop\\0工程\\5Vue\\SZYBGZDTGL-avue\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\10415\\Desktop\\0工程\\5Vue\\SZYBGZDTGL-avue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\10415\\Desktop\\0工程\\5Vue\\SZYBGZDTGL-avue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport IndexT1 from \"./index-T1\"\r\nimport IndexT2 from \"./index-T2\"\r\nimport {mapGetters} from \"vuex\";\r\nimport yb from \"/src/util/yb\";\r\nimport eframe from \"/src/util/eframe\";\r\nimport admin from \"/src/util/admin\";\r\nimport {validatenull} from \"/src/util/validate\";\r\nimport {calcDate} from \"/src/util/date.js\";\r\nimport {getStore} from \"/src/util/store.js\";\r\nimport servpara from \"/src/util/servpara\";\r\n\r\n\r\nexport default {\r\n  components: {\r\n    IndexT1,\r\n    IndexT2\r\n  },\r\n  name: \"index\",\r\n  computed: mapGetters([\"website\", \"userInfo\"]),\r\n  data() {\r\n    return {\r\n      //刷新token锁\r\n      refreshLock: false,\r\n      //刷新token的时间\r\n      refreshTime: \"\"\r\n    };\r\n  },\r\n  created() {\r\n    //实时检测刷新token\r\n    this.refreshToken();\r\n    //缓存常用字典\r\n    this.loadDic();\r\n    if (this.userInfo.fix_onln_open_flag === \"1\" && this.userInfo.fix_flag === \"1\"){\r\n      this.ybSignIn();//签到\r\n      if (this.website.isYB) {\r\n        this.initYB();\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    this.init();\r\n  },\r\n\r\n  methods: {\r\n    //初始化医保\r\n    initYB() {\r\n      setTimeout(() => {\r\n        yb.callInit();\r\n      }, 5000);\r\n    },\r\n    //签到\r\n    ybSignIn(){\r\n      let succFun = function (data) {\r\n\r\n      };\r\n      let failFun = function (data) {\r\n\r\n      };\r\n      this.$eframe.submitTargetForm({\r\n        url: '/userloginmgmt/signIn.action',\r\n        form: {},\r\n        actionFunName: \"signIn\",\r\n        succFun: succFun,\r\n        failFun: failFun,\r\n      });\r\n    },\r\n    // 屏幕检测\r\n    init() {\r\n      this.$store.commit(\"SET_SCREEN\", admin.getScreen());\r\n      window.onresize = () => {\r\n        setTimeout(() => {\r\n          this.$store.commit(\"SET_SCREEN\", admin.getScreen());\r\n        }, 0);\r\n      };\r\n    },\r\n\r\n    // 10分钟检测一次token\r\n    refreshToken() {\r\n      this.refreshTime = setInterval(() => {\r\n        const token = getStore({\r\n          name: \"token\",\r\n          debug: true\r\n        }) || {};\r\n        const date = calcDate(token.datetime, new Date().getTime());\r\n        if (validatenull(date)) return;\r\n        if (date.seconds >= this.website.tokenTime && !this.refreshLock) {\r\n          this.refreshLock = true;\r\n          this.$store.dispatch(\"RefeshToken\")\r\n              .then(() => {\r\n                this.refreshLock = false;\r\n              })\r\n              .catch(() => {\r\n                this.refreshLock = false;\r\n              });\r\n        }\r\n      },  this.website.refreshTime); //毫秒\r\n    },\r\n    //缓存常用字典\r\n    loadDic() {\r\n      // eframe.loadDicItem({dicId: \"DIC_FLAG\"});//是否\r\n      // eframe.loadDicItem({dicId: \"DIC_GEND\"});//性别\r\n      // eframe.loadDicItem({dicId: \"DIC_PSN_TYPE\"});//人员类别\r\n      // eframe.loadDicItem({dicId: \"DIC_INSUTYPE\"});//险种类型\r\n      // eframe.loadDicItem({dicId: \"DIC_INSU_ADMDVS_SZ\"});//参保所属医保区划\r\n      // eframe.loadDicItem({dicId: \"DIC_FEE_TYPE\"});//就诊类别\r\n      // eframe.loadDicItem({dicId: \"DIC_SETL_TYPE\"});//收费类别\r\n      // eframe.loadDicItem({dicId: \"DIC_MED_TYPE\"});//医疗类别\r\n      // //对账\r\n      // eframe.loadDicItem({dicId: \"DIC_STMT_RSLT\"});//对账结果\r\n      // eframe.loadDicItem({dicId: \"DIC_STMT_CLRTYPE_BD\"});//本地清算类别\r\n      // servpara.getConfigArea();\r\n    }\r\n  }\r\n};\r\n",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/page/index","sourcesContent":["<template>\r\n  <div style=\"width: 100%;height: 100%\">\r\n    <IndexT1 v-if=\"website.mainPageFrameType == 'T1'\"/>\r\n    <IndexT2 v-if=\"website.mainPageFrameType == 'T2'\"/>\r\n  </div>\r\n\r\n</template>\r\n\r\n<script>\r\nimport IndexT1 from \"./index-T1\"\r\nimport IndexT2 from \"./index-T2\"\r\nimport {mapGetters} from \"vuex\";\r\nimport yb from \"/src/util/yb\";\r\nimport eframe from \"/src/util/eframe\";\r\nimport admin from \"/src/util/admin\";\r\nimport {validatenull} from \"/src/util/validate\";\r\nimport {calcDate} from \"/src/util/date.js\";\r\nimport {getStore} from \"/src/util/store.js\";\r\nimport servpara from \"/src/util/servpara\";\r\n\r\n\r\nexport default {\r\n  components: {\r\n    IndexT1,\r\n    IndexT2\r\n  },\r\n  name: \"index\",\r\n  computed: mapGetters([\"website\", \"userInfo\"]),\r\n  data() {\r\n    return {\r\n      //刷新token锁\r\n      refreshLock: false,\r\n      //刷新token的时间\r\n      refreshTime: \"\"\r\n    };\r\n  },\r\n  created() {\r\n    //实时检测刷新token\r\n    this.refreshToken();\r\n    //缓存常用字典\r\n    this.loadDic();\r\n    if (this.userInfo.fix_onln_open_flag === \"1\" && this.userInfo.fix_flag === \"1\"){\r\n      this.ybSignIn();//签到\r\n      if (this.website.isYB) {\r\n        this.initYB();\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    this.init();\r\n  },\r\n\r\n  methods: {\r\n    //初始化医保\r\n    initYB() {\r\n      setTimeout(() => {\r\n        yb.callInit();\r\n      }, 5000);\r\n    },\r\n    //签到\r\n    ybSignIn(){\r\n      let succFun = function (data) {\r\n\r\n      };\r\n      let failFun = function (data) {\r\n\r\n      };\r\n      this.$eframe.submitTargetForm({\r\n        url: '/userloginmgmt/signIn.action',\r\n        form: {},\r\n        actionFunName: \"signIn\",\r\n        succFun: succFun,\r\n        failFun: failFun,\r\n      });\r\n    },\r\n    // 屏幕检测\r\n    init() {\r\n      this.$store.commit(\"SET_SCREEN\", admin.getScreen());\r\n      window.onresize = () => {\r\n        setTimeout(() => {\r\n          this.$store.commit(\"SET_SCREEN\", admin.getScreen());\r\n        }, 0);\r\n      };\r\n    },\r\n\r\n    // 10分钟检测一次token\r\n    refreshToken() {\r\n      this.refreshTime = setInterval(() => {\r\n        const token = getStore({\r\n          name: \"token\",\r\n          debug: true\r\n        }) || {};\r\n        const date = calcDate(token.datetime, new Date().getTime());\r\n        if (validatenull(date)) return;\r\n        if (date.seconds >= this.website.tokenTime && !this.refreshLock) {\r\n          this.refreshLock = true;\r\n          this.$store.dispatch(\"RefeshToken\")\r\n              .then(() => {\r\n                this.refreshLock = false;\r\n              })\r\n              .catch(() => {\r\n                this.refreshLock = false;\r\n              });\r\n        }\r\n      },  this.website.refreshTime); //毫秒\r\n    },\r\n    //缓存常用字典\r\n    loadDic() {\r\n      // eframe.loadDicItem({dicId: \"DIC_FLAG\"});//是否\r\n      // eframe.loadDicItem({dicId: \"DIC_GEND\"});//性别\r\n      // eframe.loadDicItem({dicId: \"DIC_PSN_TYPE\"});//人员类别\r\n      // eframe.loadDicItem({dicId: \"DIC_INSUTYPE\"});//险种类型\r\n      // eframe.loadDicItem({dicId: \"DIC_INSU_ADMDVS_SZ\"});//参保所属医保区划\r\n      // eframe.loadDicItem({dicId: \"DIC_FEE_TYPE\"});//就诊类别\r\n      // eframe.loadDicItem({dicId: \"DIC_SETL_TYPE\"});//收费类别\r\n      // eframe.loadDicItem({dicId: \"DIC_MED_TYPE\"});//医疗类别\r\n      // //对账\r\n      // eframe.loadDicItem({dicId: \"DIC_STMT_RSLT\"});//对账结果\r\n      // eframe.loadDicItem({dicId: \"DIC_STMT_CLRTYPE_BD\"});//本地清算类别\r\n      // servpara.getConfigArea();\r\n    }\r\n  }\r\n};\r\n</script>"]}]}