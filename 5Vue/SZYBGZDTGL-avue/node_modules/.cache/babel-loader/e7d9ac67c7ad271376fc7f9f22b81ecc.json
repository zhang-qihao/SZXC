{"remainingRequest":"E:\\兴才svn平台\\01苏州医保局\\88苏州医保中心岗位职责动态管理系统（SZYBGZDTGL）\\0工程\\5Vue\\SZYBGZDTGL-avue\\node_modules\\babel-loader\\lib\\index.js!E:\\兴才svn平台\\01苏州医保局\\88苏州医保中心岗位职责动态管理系统（SZYBGZDTGL）\\0工程\\5Vue\\SZYBGZDTGL-avue\\node_modules\\eslint-loader\\index.js??ref--13-0!E:\\兴才svn平台\\01苏州医保局\\88苏州医保中心岗位职责动态管理系统（SZYBGZDTGL）\\0工程\\5Vue\\SZYBGZDTGL-avue\\src\\store\\modules\\user.js","dependencies":[{"path":"E:\\兴才svn平台\\01苏州医保局\\88苏州医保中心岗位职责动态管理系统（SZYBGZDTGL）\\0工程\\5Vue\\SZYBGZDTGL-avue\\src\\store\\modules\\user.js","mtime":1658977808735},{"path":"E:\\兴才svn平台\\01苏州医保局\\88苏州医保中心岗位职责动态管理系统（SZYBGZDTGL）\\0工程\\5Vue\\SZYBGZDTGL-avue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\兴才svn平台\\01苏州医保局\\88苏州医保中心岗位职责动态管理系统（SZYBGZDTGL）\\0工程\\5Vue\\SZYBGZDTGL-avue\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\兴才svn平台\\01苏州医保局\\88苏州医保中心岗位职责动态管理系统（SZYBGZDTGL）\\0工程\\5Vue\\SZYBGZDTGL-avue\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.find\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport { setToken, removeToken } from '@/util/auth';\nimport { setStore, getStore } from '@/util/store';\nimport { isURL, validatenull } from '@/util/validate';\nimport { encryption, deepClone } from '@/util/util';\nimport website from '@/config/website';\nimport request from '@/router/axios';\nimport eframe from \"@/util/eframe\";\nimport md5 from 'js-md5';\nimport { loginByUsername } from '@/api/user';\nimport { removeStore } from \"../../util/store\";\nimport store from \"../index\";\n\nfunction addPath(ele, first) {\n  var menu = website.menu;\n  var propsConfig = menu.props;\n  var propsDefault = {\n    label: propsConfig.label || 'label',\n    path: propsConfig.path || 'path',\n    icon: propsConfig.icon || 'icon',\n    children: propsConfig.children || 'children'\n  };\n  var icon = ele[propsDefault.icon];\n  ele[propsDefault.icon] = validatenull(icon) ? menu.iconDefault : icon;\n  var isChild = ele[propsDefault.children] && ele[propsDefault.children].length !== 0;\n\n  if (isURL(ele[propsDefault.path])) {\n    ele[propsDefault.path] = ele[propsDefault.path].replace(/&/g, \"$\");\n  }\n\n  if (!isChild && first && !isURL(ele[propsDefault.path])) {\n    var path = ele[propsDefault.path] + '/index';\n    path = path.replace(/\\/\\//g, \"/\");\n    ele[propsDefault.path] = path;\n  } else {\n    ele[propsDefault.children] && ele[propsDefault.children].forEach(function (child) {\n      if (!isURL(child[propsDefault.path])) {\n        var _path = \"\".concat(ele[propsDefault.path], \"/\").concat(child[propsDefault.path] ? child[propsDefault.path] : 'index');\n\n        _path = _path.replace(/\\/\\//g, \"/\");\n        child[propsDefault.path] = _path;\n      }\n\n      addPath(child);\n    });\n  }\n}\n\nvar user = {\n  state: {\n    userInfo: {},\n    permission: {},\n    roles: [],\n    menuId: {},\n    menu: getStore({\n      name: 'menu'\n    }) || [],\n    menuAll: getStore({\n      name: 'menuAll'\n    }) || [],\n    token: getStore({\n      name: 'token'\n    }) || '',\n    topMenu: getStore({\n      name: 'topMenu'\n    }) || []\n  },\n  actions: {\n    //根据用户名登录\n    LoginByUsername: function LoginByUsername(_ref, userInfo) {\n      var commit = _ref.commit;\n      return new Promise(function (resolve, reject) {\n        var extUserId = '';\n        var loginType = '';\n        var url = '/login/token.action';\n        var username = \"{'loginType':'\" + loginType + \"',\" + \"'userId':'\" + userInfo.username + \"',\" + \"'extUserId':['\" + extUserId + \"'],\" + \"'loginMethod':'0',\" + \"'programNo':'\" + website.key + \"'}\";\n        var form = {\n          grant_type: \"password\",\n          username: username,\n          password: md5(userInfo.password)\n        };\n        var actionFunName = \"getTokenId\";\n\n        var callbackFun = function callbackFun(data) {\n          commit('SET_TOKEN', data);\n          commit('DEL_ALL_TAG');\n          commit('CLEAR_LOCK');\n          resolve();\n        };\n\n        var errorFun = function errorFun(data) {\n          eframe.alertError(data.msg);\n          reject(\"登录失败【\" + form.userId + \"】\");\n        };\n\n        eframe.submitTargetForm({\n          url: url,\n          form: form,\n          actionFunName: actionFunName,\n          succFun: callbackFun,\n          failFun: errorFun\n        });\n      });\n    },\n    //根据手机号登录\n    LoginByPhone: function LoginByPhone(_ref2, userInfo) {\n      var commit = _ref2.commit;\n      return new Promise(function (resolve) {\n        loginByUsername(userInfo.phone, userInfo.code).then(function (res) {\n          var data = res.data.data;\n          commit('SET_TOKEN', data);\n          commit('DEL_ALL_TAG');\n          commit('CLEAR_LOCK');\n          resolve();\n        });\n      });\n    },\n    //获取登录用户\n    GetUserInfo: function GetUserInfo(_ref3) {\n      var commit = _ref3.commit;\n      return new Promise(function (resolve, reject) {\n        var url = '/frame/systemmanagement/usermanagement/user/usermanagement.action';\n        var form = {};\n        var actionFunName = \"loadUserInfo\";\n\n        var callbackFun = function callbackFun(data) {\n          var role = \"1\";\n\n          if (data.isAdmin == \"0\") {\n            role = \"admin\";\n          }\n\n          var roles = {\n            roles: role\n          };\n          var permissions = [];\n          var permission = {\n            permission: permissions\n          };\n          commit('SET_USERIFNO', data);\n          commit('SET_ROLES', roles.roles);\n          commit('SET_PERMISSION', permission.permission);\n          resolve(data);\n        };\n\n        var errorFun = function errorFun(data) {\n          reject(\"获取用户信息失败\");\n        };\n\n        eframe.submitTargetForm({\n          url: url,\n          form: form,\n          actionFunName: actionFunName,\n          succFun: callbackFun,\n          failFun: errorFun\n        });\n      });\n    },\n    //刷新token\n    RefeshToken: function RefeshToken(_ref4) {\n      var state = _ref4.state,\n          commit = _ref4.commit;\n      return new Promise(function (resolve, reject) {\n        var token = getStore({\n          name: 'token'\n        });\n        var refreshToken = token.refreshToken;\n\n        if (isNull(refreshToken)) {\n          return;\n        } // let url = '/userloginmgmt/token.action';\n\n\n        var url = '/login/token.action';\n        var form = {\n          grant_type: \"refreshtoken\",\n          refreshToken: refreshToken\n        };\n        var actionFunName = \"getTokenId\";\n\n        var callbackFun = function callbackFun(data) {\n          console.log(\"refreshtoken\");\n          commit('SET_TOKEN', data);\n          resolve();\n        };\n\n        var errorFun = function errorFun(data) {\n          console.log(\"refreshtoken errorFun\");\n          store.dispatch('FedLogOut').then(function () {\n            return router.push({\n              path: '/login'\n            });\n          });\n        };\n\n        eframe.submitTargetForm({\n          url: url,\n          form: form,\n          actionFunName: actionFunName,\n          succFun: callbackFun,\n          failFun: errorFun\n        });\n      });\n    },\n    // 登出\n    LogOut: function LogOut(_ref5) {\n      var commit = _ref5.commit;\n      return new Promise(function (resolve, reject) {\n        var succFun = function succFun(data) {\n          commit('SET_USERINFO', {});\n          commit('SET_ROLES', []);\n          commit('SET_TOKEN', '');\n          commit('SET_MENUALL_NULL', []);\n          commit('SET_MENU', []);\n          commit('SET_TAG_LIST', []);\n          commit('SET_ROLES', []);\n          commit('DEL_ALL_TAG');\n          commit('CLEAR_LOCK');\n          removeToken();\n          removeStore({\n            name: 'showPageFlag'\n          });\n          resolve();\n        };\n\n        var errorFun = function errorFun(data) {\n          reject(\"登出失败【\" + userInfo.username + \"】\");\n        };\n\n        eframe.submitTargetForm({\n          // url: \"/userloginmgmt/login.action\",\n          url: \"/login/login.action\",\n          form: {},\n          actionFunName: \"logout\",\n          succFun: succFun,\n          failFun: errorFun\n        });\n      });\n    },\n    //注销session\n    FedLogOut: function FedLogOut(_ref6) {\n      var commit = _ref6.commit;\n      return new Promise(function (resolve) {\n        var succFun = function succFun(data) {\n          commit('SET_USERINFO', {});\n          commit('SET_TOKEN', '');\n          commit('SET_MENUALL_NULL', []);\n          commit('SET_MENU', []);\n          commit('SET_TAG_LIST', []);\n          commit('SET_ROLES', []);\n          commit('DEL_ALL_TAG');\n          commit('CLEAR_LOCK');\n          commit('SET_TOPMENU_NULL', []);\n          removeToken();\n          resolve();\n        };\n\n        var errorFun = function errorFun(data) {\n          reject(\"登出失败【\" + userInfo.username + \"】\");\n        };\n\n        eframe.submitTargetForm({\n          url: \"/login/login.action\",\n          form: {},\n          actionFunName: \"logout\",\n          succFun: succFun,\n          failFun: errorFun\n        });\n      });\n    },\n    //获取顶部菜单\n    GetTopMenu: function GetTopMenu() {\n      return new Promise(function (resolve, reject) {\n        var url = '/menu.action';\n        var form = {};\n        var actionFunName = \"loadTopMenu\";\n\n        var callbackFun = function callbackFun(data) {\n          var menu = deepClone(data);\n          resolve(menu);\n        };\n\n        var errorFun = function errorFun(data) {\n          reject(\"获取菜单错误！\");\n        };\n\n        eframe.submitTargetForm({\n          url: url,\n          form: form,\n          actionFunName: actionFunName,\n          succFun: callbackFun,\n          failFun: errorFun\n        });\n      });\n    },\n    //获取T2顶部菜单\n    GetT2TopMenu: function GetT2TopMenu(_ref7) {\n      var commit = _ref7.commit;\n      return new Promise(function (resolve, reject) {\n        var url = '/menu.action?moduleType=1';\n        var form = {};\n        var actionFunName = \"loadTopMenu\";\n\n        var callbackFun = function callbackFun(data) {\n          var menu = deepClone(data);\n          commit('SET_TOPMENU', menu);\n          resolve(menu);\n        };\n\n        var errorFun = function errorFun(data) {\n          reject(\"获取菜单错误！\");\n        };\n\n        eframe.submitTargetForm({\n          url: url,\n          form: form,\n          actionFunName: actionFunName,\n          succFun: callbackFun,\n          failFun: errorFun\n        });\n      });\n    },\n    //获取系统菜单\n    GetMenu: function GetMenu(_ref8, parentId) {\n      var commit = _ref8.commit;\n      return new Promise(function (resolve, reject) {\n        var url = '/menu.action';\n\n        if (parentId) {\n          url = url + '?parentId=' + parentId;\n        }\n\n        var form = {};\n        var actionFunName = \"loadMenu\";\n\n        var callbackFun = function callbackFun(data) {\n          var menu = deepClone(data);\n          menu.forEach(function (ele) {\n            addPath(ele, true);\n          });\n          commit('SET_MENUALL', menu);\n          commit('SET_MENU', menu);\n          resolve(menu);\n        };\n\n        var errorFun = function errorFun(data) {\n          reject(\"获取菜单错误！\");\n        };\n\n        eframe.submitTargetForm({\n          url: url,\n          form: form,\n          actionFunName: actionFunName,\n          succFun: callbackFun,\n          failFun: errorFun\n        });\n      });\n    },\n    //获取T2侧边菜单系统\n    GetT2Menu: function GetT2Menu(_ref9, parentId) {\n      var commit = _ref9.commit;\n      return new Promise(function (resolve, reject) {\n        var url = '/menu.action'; // if (parentId) {\n\n        url = url + '?parentId=' + 'all' + \"&rootMenuNo=\" + parentId; // }\n\n        var form = {};\n        var actionFunName = \"loadMenu\";\n\n        var callbackFun = function callbackFun(data) {\n          var menu = deepClone(data);\n          menu.forEach(function (ele) {\n            addPath(ele, true);\n          });\n          commit('SET_MENUALL', menu); // commit('SET_MENU', menu);\n\n          resolve(menu);\n        };\n\n        var errorFun = function errorFun(data) {\n          reject(\"获取菜单错误！\");\n        };\n\n        eframe.submitTargetForm({\n          url: url,\n          form: form,\n          actionFunName: actionFunName,\n          succFun: callbackFun,\n          failFun: errorFun\n        });\n      });\n    }\n  },\n  mutations: {\n    SET_TOPMENU_NULL: function SET_TOPMENU_NULL(state, topMenu) {\n      state.topMenu = [];\n      setStore({\n        name: 'topMenu',\n        content: state.topMenu\n      });\n    },\n    SET_TOPMENU: function SET_TOPMENU(state, topMenu) {\n      state.topMenu = topMenu;\n      setStore({\n        name: 'topMenu',\n        content: state.topMenu\n      });\n    },\n    SET_TOKEN: function SET_TOKEN(state, token) {\n      setToken(token);\n      state.token = token;\n      setStore({\n        name: 'token',\n        content: state.token\n      });\n    },\n    SET_MENUID: function SET_MENUID(state, menuId) {\n      state.menuId = menuId;\n    },\n    SET_USERINFO: function SET_USERINFO(state, userInfo) {\n      state.userInfo = userInfo;\n    },\n    SET_MENUALL: function SET_MENUALL(state, menuAll) {\n      var menu = state.menuAll;\n      menuAll.forEach(function (ele) {\n        if (!menu.find(function (item) {\n          return item.label == ele.label && item.path == ele.path;\n        })) {\n          menu.push(ele);\n        }\n      });\n      state.menuAll = menu;\n      setStore({\n        name: 'menuAll',\n        content: state.menuAll\n      });\n    },\n    SET_MENUALL_NULL: function SET_MENUALL_NULL(state) {\n      state.menuAll = [];\n      setStore({\n        name: 'menuAll',\n        content: state.menuAll\n      });\n    },\n    SET_MENU: function SET_MENU(state, menu) {\n      state.menu = menu;\n      setStore({\n        name: 'menu',\n        content: state.menu\n      });\n    },\n    //设置t2模式下的menu\n    SET_T2MENU: function SET_T2MENU(state, topId) {\n      function setTopId(list, topId) {\n        list.map(function (item, index) {\n          Vue.set(item, 'topId', topId);\n\n          if (item.children.length > 0) {\n            setTopId(item.children, topId);\n          }\n        });\n      }\n\n      var currentMenu = state.menuAll.filter(function (item) {\n        return item.path == '/' + topId || item.path == '/wel/' + topId;\n      });\n\n      if (currentMenu.length > 0) {\n        setTopId(currentMenu, topId);\n        state.menu = currentMenu[0].children;\n      } else {\n        state.menu = [];\n      }\n\n      setStore({\n        name: 'menu',\n        content: state.menu\n      });\n    },\n    SET_ROLES: function SET_ROLES(state, roles) {\n      state.roles = roles;\n    },\n    SET_PERMISSION: function SET_PERMISSION(state, permission) {\n      state.permission = {};\n      permission.forEach(function (ele) {\n        state.permission[ele] = true;\n      });\n    }\n  }\n};\nexport default user;",{"version":3,"sources":["E:/兴才svn平台/01苏州医保局/88苏州医保中心岗位职责动态管理系统（SZYBGZDTGL）/0工程/5Vue/SZYBGZDTGL-avue/src/store/modules/user.js"],"names":["setToken","removeToken","setStore","getStore","isURL","validatenull","encryption","deepClone","website","request","eframe","md5","loginByUsername","removeStore","store","addPath","ele","first","menu","propsConfig","props","propsDefault","label","path","icon","children","iconDefault","isChild","length","replace","forEach","child","user","state","userInfo","permission","roles","menuId","name","menuAll","token","topMenu","actions","LoginByUsername","commit","Promise","resolve","reject","extUserId","loginType","url","username","key","form","grant_type","password","actionFunName","callbackFun","data","errorFun","alertError","msg","userId","submitTargetForm","succFun","failFun","LoginByPhone","phone","code","then","res","GetUserInfo","role","isAdmin","permissions","RefeshToken","refreshToken","isNull","console","log","dispatch","router","push","LogOut","FedLogOut","GetTopMenu","GetT2TopMenu","GetMenu","parentId","GetT2Menu","mutations","SET_TOPMENU_NULL","content","SET_TOPMENU","SET_TOKEN","SET_MENUID","SET_USERINFO","SET_MENUALL","find","item","SET_MENUALL_NULL","SET_MENU","SET_T2MENU","topId","setTopId","list","map","index","Vue","set","currentMenu","filter","SET_ROLES","SET_PERMISSION"],"mappings":"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","sourcesContent":["import {\r\n    setToken,\r\n    removeToken\r\n} from '@/util/auth';\r\nimport {\r\n    setStore,\r\n    getStore\r\n} from '@/util/store';\r\nimport {\r\n    isURL,\r\n    validatenull\r\n} from '@/util/validate';\r\nimport {\r\n    encryption,\r\n    deepClone\r\n} from '@/util/util';\r\nimport website from '@/config/website';\r\n\r\nimport request from '@/router/axios';\r\nimport eframe from \"@/util/eframe\";\r\nimport md5 from 'js-md5';\r\nimport {\r\n    loginByUsername,\r\n} from '@/api/user';\r\nimport {removeStore} from \"../../util/store\";\r\nimport store from \"../index\";\r\nfunction addPath(ele, first) {\r\n    const menu = website.menu;\r\n    const propsConfig = menu.props;\r\n    const propsDefault = {\r\n        label: propsConfig.label || 'label',\r\n        path: propsConfig.path || 'path',\r\n        icon: propsConfig.icon || 'icon',\r\n        children: propsConfig.children || 'children'\r\n    };\r\n    const icon = ele[propsDefault.icon];\r\n    ele[propsDefault.icon] = validatenull(icon) ? menu.iconDefault : icon;\r\n    const isChild = ele[propsDefault.children] && ele[propsDefault.children].length !== 0;\r\n    if (isURL(ele[propsDefault.path])) {\r\n        ele[propsDefault.path] = ele[propsDefault.path].replace(/&/g, \"$\")\r\n    }\r\n    if (!isChild && first && !isURL(ele[propsDefault.path])) {\r\n        let path = ele[propsDefault.path] + '/index';\r\n        path = path.replace(/\\/\\//g, \"/\");\r\n        ele[propsDefault.path] = path;\r\n    } else {\r\n\r\n        ele[propsDefault.children] && ele[propsDefault.children].forEach(child => {\r\n            if (!isURL(child[propsDefault.path])) {\r\n                let path =\r\n                    `${ele[propsDefault.path]}/${child[propsDefault.path] ? child[propsDefault.path] : 'index'}`;\r\n                path = path.replace(/\\/\\//g, \"/\");\r\n                child[propsDefault.path] = path;\r\n            }\r\n            addPath(child);\r\n        })\r\n    }\r\n\r\n}\r\n\r\nconst user = {\r\n    state: {\r\n        userInfo: {},\r\n        permission: {},\r\n        roles: [],\r\n        menuId: {},\r\n        menu: getStore({\r\n            name: 'menu'\r\n        }) || [],\r\n        menuAll: getStore({\r\n            name: 'menuAll'\r\n        }) || [],\r\n        token: getStore({\r\n            name: 'token'\r\n        }) || '',\r\n        topMenu:getStore({\r\n            name:'topMenu'\r\n        }) || [],\r\n    },\r\n    actions: {\r\n        //根据用户名登录\r\n        LoginByUsername({\r\n                            commit\r\n                        }, userInfo) {\r\n            return new Promise((resolve, reject) => {\r\n                let extUserId = '';\r\n                let loginType = '';\r\n\r\n                let url = '/login/token.action';\r\n                let username = \"{'loginType':'\" + loginType + \"',\" +\r\n                    \"'userId':'\" + userInfo.username + \"',\" +\r\n                    \"'extUserId':['\" + extUserId + \"'],\" +\r\n                    \"'loginMethod':'0',\" +\r\n                    \"'programNo':'\" + website.key + \"'}\";\r\n\r\n                let form = {\r\n                    grant_type: \"password\",\r\n                    username: username,\r\n                    password: md5(userInfo.password),\r\n                };\r\n                let actionFunName = \"getTokenId\";\r\n\r\n                let callbackFun = function (data) {\r\n                    commit('SET_TOKEN', data);\r\n                    commit('DEL_ALL_TAG');\r\n                    commit('CLEAR_LOCK');\r\n                    resolve();\r\n                };\r\n                let errorFun = function (data) {\r\n                    eframe.alertError(data.msg);\r\n                    reject(\"登录失败【\" + form.userId + \"】\");\r\n                };\r\n                eframe.submitTargetForm({\r\n                    url: url,\r\n                    form: form,\r\n                    actionFunName: actionFunName,\r\n                    succFun: callbackFun,\r\n                    failFun: errorFun\r\n                });\r\n\r\n            })\r\n        },\r\n\r\n        //根据手机号登录\r\n        LoginByPhone({commit}, userInfo) {\r\n            return new Promise((resolve) => {\r\n                loginByUsername(userInfo.phone, userInfo.code).then(res => {\r\n                    const data = res.data.data;\r\n                    commit('SET_TOKEN', data);\r\n                    commit('DEL_ALL_TAG');\r\n                    commit('CLEAR_LOCK');\r\n                    resolve();\r\n                })\r\n            })\r\n        },\r\n        //获取登录用户\r\n        GetUserInfo({commit}) {\r\n            return new Promise((resolve, reject) => {\r\n                let url= '/frame/systemmanagement/usermanagement/user/usermanagement.action'\r\n                let form = {};\r\n                let actionFunName = \"loadUserInfo\";\r\n                let callbackFun = function (data) {\r\n\r\n                    let role = \"1\";\r\n                    if (data.isAdmin == \"0\") {\r\n                        role = \"admin\"\r\n                    }\r\n                    let roles = {\r\n                        roles: role,\r\n                    };\r\n                    let permissions = [];\r\n                    let permission = {\r\n                        permission: permissions\r\n                    };\r\n                    commit('SET_USERIFNO', data);\r\n                    commit('SET_ROLES', roles.roles);\r\n                    commit('SET_PERMISSION', permission.permission);\r\n                    resolve(data);\r\n                };\r\n                let errorFun = function (data) {\r\n                    reject(\"获取用户信息失败\");\r\n                };\r\n                eframe.submitTargetForm({\r\n                    url: url,\r\n                    form: form,\r\n                    actionFunName: actionFunName,\r\n                    succFun: callbackFun,\r\n                    failFun: errorFun\r\n                });\r\n            })\r\n        },\r\n        //刷新token\r\n        RefeshToken({state, commit}) {\r\n            return new Promise((resolve, reject) => {\r\n                let token = getStore({\r\n                    name: 'token'\r\n                });\r\n\r\n                let refreshToken = token.refreshToken;\r\n                if(isNull(refreshToken)){\r\n                    return;\r\n                }\r\n                // let url = '/userloginmgmt/token.action';\r\n                let url = '/login/token.action';\r\n                let form = {\r\n                    grant_type: \"refreshtoken\",\r\n                    refreshToken: refreshToken,\r\n                };\r\n                let actionFunName = \"getTokenId\";\r\n                let callbackFun = function (data) {\r\n                    console.log(\"refreshtoken\");\r\n                    commit('SET_TOKEN', data);\r\n                    resolve();\r\n                };\r\n                let errorFun = function (data) {\r\n                    console.log(\"refreshtoken errorFun\");\r\n                    store.dispatch('FedLogOut').then(() => router.push({ path: '/login' }));\r\n                };\r\n                eframe.submitTargetForm({\r\n                    url: url,\r\n                    form: form,\r\n                    actionFunName: actionFunName,\r\n                    succFun: callbackFun,\r\n                    failFun: errorFun\r\n                });\r\n            });\r\n        },\r\n\r\n        // 登出\r\n        LogOut({commit}) {\r\n            return new Promise((resolve, reject) => {\r\n                let succFun = function (data) {\r\n                    commit('SET_USERINFO', {});\r\n                    commit('SET_ROLES', []);\r\n                    commit('SET_TOKEN', '')\r\n                    commit('SET_MENUALL_NULL', []);\r\n                    commit('SET_MENU', [])\r\n                    commit('SET_TAG_LIST', [])\r\n                    commit('SET_ROLES', [])\r\n                    commit('DEL_ALL_TAG');\r\n                    commit('CLEAR_LOCK');\r\n                    removeToken();\r\n                    removeStore({name: 'showPageFlag'});\r\n                    resolve();\r\n                };\r\n                let errorFun = function (data) {\r\n                    reject(\"登出失败【\" + userInfo.username + \"】\");\r\n                };\r\n                eframe.submitTargetForm({\r\n                    // url: \"/userloginmgmt/login.action\",\r\n                    url: \"/login/login.action\",\r\n                    form: {},\r\n                    actionFunName: \"logout\",\r\n                    succFun: succFun,\r\n                    failFun: errorFun\r\n                });\r\n\r\n            })\r\n        },\r\n        //注销session\r\n        FedLogOut({commit}) {\r\n            return new Promise(resolve => {\r\n                let succFun = function (data) {\r\n                    commit('SET_USERINFO', {});\r\n                    commit('SET_TOKEN', '')\r\n                    commit('SET_MENUALL_NULL', []);\r\n                    commit('SET_MENU', [])\r\n                    commit('SET_TAG_LIST', [])\r\n                    commit('SET_ROLES', [])\r\n                    commit('DEL_ALL_TAG');\r\n                    commit('CLEAR_LOCK');\r\n                    commit('SET_TOPMENU_NULL',[])\r\n                    removeToken()\r\n                    resolve()\r\n                }\r\n                let errorFun = function (data) {\r\n                    reject(\"登出失败【\" + userInfo.username + \"】\");\r\n                };\r\n                eframe.submitTargetForm({\r\n                    url: \"/login/login.action\",\r\n                    form: {},\r\n                    actionFunName: \"logout\",\r\n                    succFun: succFun,\r\n                    failFun: errorFun\r\n                });\r\n            })\r\n        },\r\n        //获取顶部菜单\r\n        GetTopMenu() {\r\n            return new Promise((resolve, reject) => {\r\n                let url = '/menu.action';\r\n                let form = {};\r\n                let actionFunName = \"loadTopMenu\";\r\n                let callbackFun = function (data) {\r\n                    let menu = deepClone(data);\r\n                    resolve(menu);\r\n                };\r\n                let errorFun = function (data) {\r\n                    reject(\"获取菜单错误！\");\r\n                };\r\n                eframe.submitTargetForm({\r\n                    url: url,\r\n                    form: form,\r\n                    actionFunName: actionFunName,\r\n                    succFun: callbackFun,\r\n                    failFun: errorFun\r\n                });\r\n            });\r\n        },\r\n        //获取T2顶部菜单\r\n        GetT2TopMenu({commit}) {\r\n            return new Promise((resolve, reject) => {\r\n                let url = '/menu.action?moduleType=1';\r\n                let form = {};\r\n                let actionFunName = \"loadTopMenu\";\r\n                let callbackFun = function (data) {\r\n                    let menu = deepClone(data);\r\n                    commit('SET_TOPMENU', menu);\r\n                    resolve(menu);\r\n                };\r\n                let errorFun = function (data) {\r\n                    reject(\"获取菜单错误！\");\r\n                };\r\n                eframe.submitTargetForm({\r\n                    url: url,\r\n                    form: form,\r\n                    actionFunName: actionFunName,\r\n                    succFun: callbackFun,\r\n                    failFun: errorFun\r\n                });\r\n            });\r\n        },\r\n        //获取系统菜单\r\n        GetMenu({commit}, parentId) {\r\n            return new Promise((resolve, reject) => {\r\n                let url = '/menu.action';\r\n                if (parentId) {\r\n                    url = url + '?parentId=' + parentId;\r\n                }\r\n                let form = {};\r\n                let actionFunName = \"loadMenu\";\r\n                let callbackFun = function (data) {\r\n                    let menu = deepClone(data);\r\n                    menu.forEach(ele => {\r\n                        addPath(ele, true);\r\n                    });\r\n                    commit('SET_MENUALL', menu);\r\n                    commit('SET_MENU', menu);\r\n                    resolve(menu);\r\n                };\r\n                let errorFun = function (data) {\r\n                    reject(\"获取菜单错误！\");\r\n                };\r\n                eframe.submitTargetForm({\r\n                    url: url,\r\n                    form: form,\r\n                    actionFunName: actionFunName,\r\n                    succFun: callbackFun,\r\n                    failFun: errorFun\r\n                });\r\n            })\r\n        },\r\n        //获取T2侧边菜单系统\r\n        GetT2Menu({commit}, parentId) {\r\n            return new Promise((resolve, reject) => {\r\n                let url = '/menu.action';\r\n                // if (parentId) {\r\n                    url = url + '?parentId=' + 'all' + \"&rootMenuNo=\" + parentId;\r\n                // }\r\n                let form = {};\r\n                let actionFunName = \"loadMenu\";\r\n                let callbackFun = function (data) {\r\n                    let menu = deepClone(data);\r\n                    menu.forEach(ele => {\r\n                        addPath(ele, true);\r\n                    });\r\n                    commit('SET_MENUALL', menu);\r\n                    // commit('SET_MENU', menu);\r\n                    resolve(menu);\r\n                };\r\n                let errorFun = function (data) {\r\n                    reject(\"获取菜单错误！\");\r\n                };\r\n                eframe.submitTargetForm({\r\n                    url: url,\r\n                    form: form,\r\n                    actionFunName: actionFunName,\r\n                    succFun: callbackFun,\r\n                    failFun: errorFun\r\n                });\r\n            })\r\n        },\r\n    },\r\n    mutations: {\r\n        SET_TOPMENU_NULL:(state,topMenu)=>{\r\n            state.topMenu = []\r\n            setStore({\r\n                name:'topMenu',\r\n                content:state.topMenu\r\n            })\r\n        },\r\n        SET_TOPMENU:(state,topMenu) => {\r\n            state.topMenu = topMenu\r\n            setStore({\r\n                name:'topMenu',\r\n                content:state.topMenu\r\n            })\r\n        },\r\n        SET_TOKEN: (state, token) => {\r\n            setToken(token)\r\n            state.token = token;\r\n            setStore({\r\n                name: 'token',\r\n                content: state.token\r\n            })\r\n\r\n        },\r\n        SET_MENUID(state, menuId) {\r\n            state.menuId = menuId;\r\n        }\r\n        ,\r\n        SET_USERINFO: (state, userInfo) => {\r\n            state.userInfo = userInfo;\r\n        },\r\n        SET_MENUALL:(state, menuAll) => {\r\n            let menu = state.menuAll;\r\n            menuAll.forEach(ele => {\r\n                if (!menu.find(item => item.label == ele.label && item.path == ele.path)) {\r\n                    menu.push(ele);\r\n                }\r\n            })\r\n            state.menuAll = menu\r\n            setStore({\r\n                name: 'menuAll',\r\n                content: state.menuAll\r\n            })\r\n        },\r\n        SET_MENUALL_NULL:(state) => {\r\n            state.menuAll = []\r\n            setStore({\r\n                name: 'menuAll',\r\n                content: state.menuAll\r\n            })\r\n        },\r\n        SET_MENU:(state, menu) => {\r\n            state.menu = menu\r\n            setStore({\r\n                name: 'menu',\r\n                content: state.menu\r\n            })\r\n        },\r\n        //设置t2模式下的menu\r\n        SET_T2MENU:(state,topId) => {\r\n            function setTopId(list,topId){\r\n                list.map((item,index)=>{\r\n                    Vue.set(item,'topId',topId)\r\n                    if(item.children.length > 0){\r\n                        setTopId(item.children,topId)\r\n                    }\r\n                })\r\n            }\r\n            let currentMenu = state.menuAll.filter(item =>\r\n                (item.path == ('/' + topId)) || (item.path == '/wel/' + topId)\r\n            )\r\n            if(currentMenu.length > 0){\r\n                setTopId(currentMenu,topId)\r\n                state.menu = currentMenu[0].children\r\n            }else{\r\n                state.menu = []\r\n            }\r\n            setStore({\r\n                name: 'menu',\r\n                content: state.menu\r\n            })\r\n        },\r\n        SET_ROLES:(state, roles) => {\r\n            state.roles = roles;\r\n        },\r\n        SET_PERMISSION:(state, permission) => {\r\n            state.permission = {};\r\n            permission.forEach(ele => {\r\n                state.permission[ele] = true;\r\n            });\r\n        },\r\n    }\r\n}\r\nexport default user;\r\n"]}]}