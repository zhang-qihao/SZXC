{"remainingRequest":"C:\\Users\\10415\\Desktop\\0工程\\5Vue\\SZYBGZDTGL-avue\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\10415\\Desktop\\0工程\\5Vue\\SZYBGZDTGL-avue\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\10415\\Desktop\\0工程\\5Vue\\SZYBGZDTGL-avue\\src\\mixins\\crud.js","dependencies":[{"path":"C:\\Users\\10415\\Desktop\\0工程\\5Vue\\SZYBGZDTGL-avue\\src\\mixins\\crud.js","mtime":1640694387797},{"path":"C:\\Users\\10415\\Desktop\\0工程\\5Vue\\SZYBGZDTGL-avue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\10415\\Desktop\\0工程\\5Vue\\SZYBGZDTGL-avue\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\10415\\Desktop\\0工程\\5Vue\\SZYBGZDTGL-avue\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nexport default (function (app) {\n  var _option = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  var mixins = {\n    data: function data() {\n      return {\n        data: [],\n        form: {},\n        params: {},\n        api: require(\"@/api/\".concat(_option.name)),\n        loading: false,\n        page: {}\n      };\n    },\n    computed: {\n      option: function option() {\n        return require(\"@/option/\".concat(_option.name)).default(this);\n      },\n      bindVal: function bindVal() {\n        return {\n          ref: 'crud',\n          option: this.option,\n          data: this.data,\n          tableLoading: this.loading\n        };\n      },\n      onEvent: function onEvent() {\n        return {\n          'on-load': this.getList,\n          'row-save': this.rowSave,\n          'row-update': this.rowUpdate,\n          'row-del': this.rowDel,\n          'refresh-change': this.refreshChange,\n          'search-reset': this.searchChange,\n          'search-change': this.searchChange\n        };\n      },\n      rowKey: function rowKey() {\n        return _option.rowKey || 'id';\n      }\n    },\n    methods: {\n      getList: function getList() {\n        var _this = this;\n\n        var callback = function callback() {\n          _this.loading = true;\n          var pageParams = {};\n          pageParams[_option.pageNumber || 'pageNumber'] = _this.page.currentPage;\n          pageParams[_option.pageSize || 'pageSize'] = _this.page.pageSize;\n          var data = Object.assign(pageParams, _this.params);\n          _this.data = [];\n\n          _this.api[_option.list || 'list'](data).then(function (res) {\n            _this.loading = false;\n            var data;\n\n            if (_option.res) {\n              data = _option.res(res.data);\n            } else {\n              data = res.data.data;\n            }\n\n            _this.page.total = data[_option.total || 'total'];\n            var result = data[_option.data || 'data'];\n            _this.data = result;\n\n            if (_this.listAfter) {\n              _this.listAfter(data);\n            } else {\n              _this.$message.success('获取成功');\n            }\n          });\n        };\n\n        if (this.listBefore) {\n          this.listBefore();\n        }\n\n        callback();\n      },\n      rowSave: function rowSave(row, done, loading) {\n        var _this2 = this;\n\n        var callback = function callback() {\n          delete _this2.form.params;\n\n          _this2.api[_option.add || 'add'](_this2.form).then(function (data) {\n            _this2.getList();\n\n            if (_this2.addAfter) {\n              _this2.addAfter(data);\n            } else {\n              _this2.$message.success('新增成功');\n            }\n\n            done();\n          }).catch(function () {\n            loading();\n          });\n        };\n\n        if (this.addBefore) {\n          this.addBefore();\n        }\n\n        callback();\n      },\n      rowUpdate: function rowUpdate(row, index, done, loading) {\n        var _this3 = this;\n\n        var callback = function callback() {\n          delete _this3.form.params;\n\n          _this3.api[_option.update || 'update'](row[_this3.rowKey], _this3.form, index).then(function (data) {\n            _this3.getList();\n\n            if (_this3.updateAfter) {\n              _this3.updateAfter(data);\n            } else {\n              _this3.$message.success('更新成功');\n            }\n\n            done();\n          }).catch(function () {\n            loading();\n          });\n        };\n\n        if (this.updateBefore) {\n          this.updateBefore();\n        }\n\n        callback();\n      },\n      rowDel: function rowDel(row, index) {\n        var _this4 = this;\n\n        var callback = function callback() {\n          _this4.api[_option.del || 'del'](row[_this4.rowKey], row).then(function (data) {\n            _this4.getList();\n\n            if (_this4.delAfter) {\n              _this4.delAfter(data, row, index);\n            } else {\n              _this4.$message.success('删除成功');\n            }\n          });\n        };\n\n        if (this.delBefore) {\n          this.delBefore();\n          callback();\n        } else {\n          this.$confirm(\"\\u6B64\\u64CD\\u4F5C\\u5C06\\u6C38\\u4E45\\u5220\\u9664\\u5E8F\\u53F7\\u3010\".concat(index, \"\\u3011\\u7684\\u6570\\u636E, \\u662F\\u5426\\u7EE7\\u7EED?\"), '提示', {\n            confirmButtonText: '确定',\n            cancelButtonText: '取消',\n            type: 'warning'\n          }).then(function () {\n            callback();\n          });\n        }\n      },\n      searchChange: function searchChange(params, done) {\n        if (done) done();\n        this.params = params;\n        this.page.currentPage = 1;\n        this.getList();\n      },\n      refreshChange: function refreshChange() {\n        this.getList();\n      }\n    }\n  };\n  app.mixins = app.mixins || [];\n  app.mixins.push(mixins);\n  return app;\n});",{"version":3,"sources":["C:/Users/10415/Desktop/0工程/5Vue/SZYBGZDTGL-avue/src/mixins/crud.js"],"names":["app","option","mixins","data","form","params","api","require","name","loading","page","computed","default","bindVal","ref","tableLoading","onEvent","getList","rowSave","rowUpdate","rowDel","refreshChange","searchChange","rowKey","methods","callback","pageParams","pageNumber","currentPage","pageSize","Object","assign","list","then","res","total","result","listAfter","$message","success","listBefore","row","done","add","addAfter","catch","addBefore","index","update","updateAfter","updateBefore","del","delAfter","delBefore","$confirm","confirmButtonText","cancelButtonText","type","push"],"mappings":"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","sourcesContent":["export default (app, option = {}) => {\r\n  let mixins = {\r\n    data () {\r\n      return {\r\n        data: [],\r\n        form: {},\r\n        params: {},\r\n        api: require(`@/api/${option.name}`),\r\n        loading: false,\r\n        page: {},\r\n      }\r\n    },\r\n    computed: {\r\n      option () {\r\n        return require(`@/option/${option.name}`).default(this)\r\n      },\r\n      bindVal () {\r\n        return {\r\n          ref: 'crud',\r\n          option: this.option,\r\n          data: this.data,\r\n          tableLoading: this.loading\r\n        }\r\n      },\r\n      onEvent () {\r\n        return {\r\n          'on-load': this.getList,\r\n          'row-save': this.rowSave,\r\n          'row-update': this.rowUpdate,\r\n          'row-del': this.rowDel,\r\n          'refresh-change': this.refreshChange,\r\n          'search-reset': this.searchChange,\r\n          'search-change': this.searchChange\r\n        }\r\n      },\r\n      rowKey () {\r\n        return option.rowKey || 'id'\r\n      }\r\n    },\r\n    methods: {\r\n      getList () {\r\n        const callback = () => {\r\n          this.loading = true;\r\n          let pageParams = {}\r\n          pageParams[option.pageNumber || 'pageNumber'] = this.page.currentPage\r\n          pageParams[option.pageSize || 'pageSize'] = this.page.pageSize\r\n          const data = Object.assign(pageParams, this.params)\r\n          this.data = [];\r\n          this.api[option.list || 'list'](data).then(res => {\r\n            this.loading = false;\r\n            let data;\r\n            if (option.res) {\r\n              data = option.res(res.data);\r\n            } else {\r\n              data = res.data.data\r\n            }\r\n            this.page.total = data[option.total || 'total'];\r\n            const result = data[option.data || 'data'];\r\n            this.data = result;\r\n            if (this.listAfter) {\r\n              this.listAfter(data)\r\n            } else {\r\n              this.$message.success('获取成功')\r\n            }\r\n          })\r\n        }\r\n        if (this.listBefore) {\r\n          this.listBefore()\r\n        }\r\n        callback()\r\n      },\r\n      rowSave (row, done, loading) {\r\n        const callback = () => {\r\n          delete this.form.params;\r\n          this.api[option.add || 'add'](this.form).then((data) => {\r\n            this.getList();\r\n            if (this.addAfter) {\r\n              this.addAfter(data)\r\n            } else {\r\n              this.$message.success('新增成功')\r\n            }\r\n            done();\r\n          }).catch(() => {\r\n            loading()\r\n          })\r\n        }\r\n        if (this.addBefore) {\r\n          this.addBefore()\r\n        }\r\n        callback()\r\n      },\r\n      rowUpdate (row, index, done, loading) {\r\n        const callback = () => {\r\n          delete this.form.params;\r\n          this.api[option.update || 'update'](row[this.rowKey], this.form, index).then((data) => {\r\n            this.getList();\r\n            if (this.updateAfter) {\r\n              this.updateAfter(data)\r\n            } else {\r\n              this.$message.success('更新成功')\r\n            }\r\n            done()\r\n          }).catch(() => {\r\n            loading()\r\n          })\r\n        }\r\n        if (this.updateBefore) {\r\n          this.updateBefore()\r\n        }\r\n        callback()\r\n      },\r\n      rowDel (row, index) {\r\n        const callback = () => {\r\n          this.api[option.del || 'del'](row[this.rowKey], row).then((data) => {\r\n            this.getList();\r\n            if (this.delAfter) {\r\n              this.delAfter(data, row, index)\r\n            } else {\r\n              this.$message.success('删除成功')\r\n            }\r\n          })\r\n        }\r\n        if (this.delBefore) {\r\n          this.delBefore()\r\n          callback()\r\n        } else {\r\n          this.$confirm(`此操作将永久删除序号【${index}】的数据, 是否继续?`, '提示', {\r\n            confirmButtonText: '确定',\r\n            cancelButtonText: '取消',\r\n            type: 'warning'\r\n          }).then(() => {\r\n            callback()\r\n          })\r\n        }\r\n      },\r\n      searchChange (params, done) {\r\n        if (done) done();\r\n        this.params = params;\r\n        this.page.currentPage = 1;\r\n        this.getList();\r\n      },\r\n      refreshChange () {\r\n        this.getList();\r\n      }\r\n    }\r\n  }\r\n  app.mixins = app.mixins || [];\r\n  app.mixins.push(mixins)\r\n  return app;\r\n}"]}]}