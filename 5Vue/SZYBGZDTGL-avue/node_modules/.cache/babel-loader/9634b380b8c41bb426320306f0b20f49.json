{"remainingRequest":"E:\\兴才svn平台\\01苏州医保局\\88苏州医保中心岗位职责动态管理系统（SZYBGZDTGL）\\0工程\\5Vue\\SZYBGZDTGL-avue\\node_modules\\babel-loader\\lib\\index.js!E:\\兴才svn平台\\01苏州医保局\\88苏州医保中心岗位职责动态管理系统（SZYBGZDTGL）\\0工程\\5Vue\\SZYBGZDTGL-avue\\node_modules\\eslint-loader\\index.js??ref--13-0!E:\\兴才svn平台\\01苏州医保局\\88苏州医保中心岗位职责动态管理系统（SZYBGZDTGL）\\0工程\\5Vue\\SZYBGZDTGL-avue\\src\\permission.js","dependencies":[{"path":"E:\\兴才svn平台\\01苏州医保局\\88苏州医保中心岗位职责动态管理系统（SZYBGZDTGL）\\0工程\\5Vue\\SZYBGZDTGL-avue\\src\\permission.js","mtime":1657522391352},{"path":"E:\\兴才svn平台\\01苏州医保局\\88苏州医保中心岗位职责动态管理系统（SZYBGZDTGL）\\0工程\\5Vue\\SZYBGZDTGL-avue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\兴才svn平台\\01苏州医保局\\88苏州医保中心岗位职责动态管理系统（SZYBGZDTGL）\\0工程\\5Vue\\SZYBGZDTGL-avue\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\兴才svn平台\\01苏州医保局\\88苏州医保中心岗位职责动态管理系统（SZYBGZDTGL）\\0工程\\5Vue\\SZYBGZDTGL-avue\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.function.name\";\nimport _defineProperty from \"E:/\\u5174\\u624Dsvn\\u5E73\\u53F0/01\\u82CF\\u5DDE\\u533B\\u4FDD\\u5C40/88\\u82CF\\u5DDE\\u533B\\u4FDD\\u4E2D\\u5FC3\\u5C97\\u4F4D\\u804C\\u8D23\\u52A8\\u6001\\u7BA1\\u7406\\u7CFB\\u7EDF\\uFF08SZYBGZDTGL\\uFF09/0\\u5DE5\\u7A0B/5Vue/SZYBGZDTGL-avue/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n/**\r\n * 全站权限配置\r\n * \r\n */\nimport router from \"./router/router\";\nimport store from \"./store\";\nimport { validatenull } from '@/util/validate';\nimport { getToken } from '@/util/auth';\nimport NProgress from 'nprogress'; // progress bar\n\nimport 'nprogress/nprogress.css'; // progress bar style\n\nNProgress.configure({\n  showSpinner: false\n});\nvar lockPage = store.getters.website.lockPage; //锁屏页\n\nrouter.beforeEach(function (to, from, next) {\n  var meta = to.meta || {};\n  var isMenu = meta.menu === undefined ? to.query.menu : meta.menu;\n  store.commit('SET_IS_MENU', isMenu === undefined);\n\n  if (getToken()) {\n    if (store.getters.isLock && to.path != lockPage) {\n      //如果系统激活锁屏，全部跳转到锁屏页\n      next({\n        path: lockPage\n      });\n    } else if (to.path === '/login') {\n      //如果登录成功访问登录页跳转到主页\n      console.log(\"【Permission】 1: To \" + to.path);\n      next({\n        path: '/'\n      });\n    } else {\n      //如果用户信息为空则获取用户信息，获取用户信息失败，跳转到登录页\n      if (store.getters.roles.length === 0) {\n        store.dispatch('GetUserInfo').then(function () {\n          next(_objectSpread(_objectSpread({}, to), {}, {\n            replace: true\n          }));\n        }).catch(function () {\n          store.dispatch('FedLogOut').then(function () {\n            // alert(\"获取用户信息异常！\");\n            console.log(\"【Permission】 2: To \" + to.path);\n            next({\n              path: '/login'\n            });\n          });\n        });\n      } else {\n        var value = (to.query.src || to.fullPath) + to.hash;\n        var label = to.query.name || to.name;\n\n        var _meta = to.meta || router.$avueRouter.meta || {};\n\n        var i18n = to.query.i18n;\n        var topId = to.query.topId || '';\n\n        if (to.query.target) {\n          window.open(value, value);\n          return;\n        } else if (_meta.isTab !== false && !validatenull(value) && !validatenull(label)) {\n          store.commit('ADD_TAG', {\n            label: label,\n            value: value,\n            params: to.params,\n            query: to.query,\n            saveFlag: false,\n            topId: topId,\n            meta: function () {\n              if (!i18n) {\n                return _meta;\n              }\n\n              return {\n                i18n: i18n\n              };\n            }(),\n            group: router.$avueRouter.group || []\n          });\n        }\n\n        next();\n      }\n    }\n  } else {\n    //判断是否需要认证，没有登录访问去登录页\n    if (meta.isAuth === false) {\n      next();\n    } else {\n      console.log(\"【Permission】 3: To \" + to.path);\n      next('/login');\n    }\n  }\n});\nrouter.afterEach(function () {\n  NProgress.done();\n  var title = store.getters.tag.label;\n  var i18n = store.getters.tag.meta.i18n;\n  title = router.$avueRouter.generateTitle(title, i18n); //根据当前的标签也获取label的值动态设置浏览器标题\n\n  router.$avueRouter.setTitle(title);\n});",{"version":3,"sources":["E:/兴才svn平台/01苏州医保局/88苏州医保中心岗位职责动态管理系统（SZYBGZDTGL）/0工程/5Vue/SZYBGZDTGL-avue/src/permission.js"],"names":["router","store","validatenull","getToken","NProgress","configure","showSpinner","lockPage","getters","website","beforeEach","to","from","next","meta","isMenu","menu","undefined","query","commit","isLock","path","console","log","roles","length","dispatch","then","replace","catch","value","src","fullPath","hash","label","name","$avueRouter","i18n","topId","target","window","open","isTab","params","saveFlag","group","isAuth","afterEach","done","title","tag","generateTitle","setTitle"],"mappings":";;;;;;;;;;AAAA;AACA;AACA;AACA;AACA,OAAOA,MAAP;AACA,OAAOC,KAAP;AACA,SAASC,YAAT,QAA6B,iBAA7B;AACA,SAASC,QAAT,QAAyB,aAAzB;AACA,OAAOC,SAAP,MAAsB,WAAtB,C,CAAkC;;AAClC,OAAO,yBAAP,C,CAAiC;;AACjCA,SAAS,CAACC,SAAV,CAAoB;AAAEC,EAAAA,WAAW,EAAE;AAAf,CAApB;AACA,IAAMC,QAAQ,GAAGN,KAAK,CAACO,OAAN,CAAcC,OAAd,CAAsBF,QAAvC,C,CAAiD;;AACjDP,MAAM,CAACU,UAAP,CAAkB,UAACC,EAAD,EAAKC,IAAL,EAAWC,IAAX,EAAoB;AACpC,MAAMC,IAAI,GAAGH,EAAE,CAACG,IAAH,IAAW,EAAxB;AACA,MAAMC,MAAM,GAAGD,IAAI,CAACE,IAAL,KAAcC,SAAd,GAA0BN,EAAE,CAACO,KAAH,CAASF,IAAnC,GAA0CF,IAAI,CAACE,IAA9D;AACAf,EAAAA,KAAK,CAACkB,MAAN,CAAa,aAAb,EAA4BJ,MAAM,KAAKE,SAAvC;;AAEA,MAAId,QAAQ,EAAZ,EAAgB;AACd,QAAIF,KAAK,CAACO,OAAN,CAAcY,MAAd,IAAwBT,EAAE,CAACU,IAAH,IAAWd,QAAvC,EAAiD;AAAE;AACjDM,MAAAA,IAAI,CAAC;AAAEQ,QAAAA,IAAI,EAAEd;AAAR,OAAD,CAAJ;AACD,KAFD,MAEO,IAAII,EAAE,CAACU,IAAH,KAAY,QAAhB,EAA0B;AAAE;AACjCC,MAAAA,OAAO,CAACC,GAAR,CAAY,wBAAuBZ,EAAE,CAACU,IAAtC;AACAR,MAAAA,IAAI,CAAC;AAAEQ,QAAAA,IAAI,EAAE;AAAR,OAAD,CAAJ;AACD,KAHM,MAGA;AACL;AACA,UAAIpB,KAAK,CAACO,OAAN,CAAcgB,KAAd,CAAoBC,MAApB,KAA+B,CAAnC,EAAsC;AACpCxB,QAAAA,KAAK,CAACyB,QAAN,CAAe,aAAf,EAA8BC,IAA9B,CAAmC,YAAM;AACvCd,UAAAA,IAAI,iCAAMF,EAAN;AAAUiB,YAAAA,OAAO,EAAE;AAAnB,aAAJ;AACD,SAFD,EAEGC,KAFH,CAES,YAAM;AACb5B,UAAAA,KAAK,CAACyB,QAAN,CAAe,WAAf,EAA4BC,IAA5B,CAAiC,YAAM;AACrC;AACAL,YAAAA,OAAO,CAACC,GAAR,CAAY,wBAAuBZ,EAAE,CAACU,IAAtC;AACAR,YAAAA,IAAI,CAAC;AAAEQ,cAAAA,IAAI,EAAE;AAAR,aAAD,CAAJ;AACD,WAJD;AAKD,SARD;AASD,OAVD,MAUO;AACL,YAAMS,KAAK,GAAG,CAACnB,EAAE,CAACO,KAAH,CAASa,GAAT,IAAgBpB,EAAE,CAACqB,QAApB,IAAgCrB,EAAE,CAACsB,IAAjD;AACA,YAAMC,KAAK,GAAGvB,EAAE,CAACO,KAAH,CAASiB,IAAT,IAAiBxB,EAAE,CAACwB,IAAlC;;AACA,YAAMrB,KAAI,GAAGH,EAAE,CAACG,IAAH,IAAWd,MAAM,CAACoC,WAAP,CAAmBtB,IAA9B,IAAsC,EAAnD;;AACA,YAAMuB,IAAI,GAAG1B,EAAE,CAACO,KAAH,CAASmB,IAAtB;AACA,YAAMC,KAAK,GAAG3B,EAAE,CAACO,KAAH,CAASoB,KAAT,IAAkB,EAAhC;;AACA,YAAI3B,EAAE,CAACO,KAAH,CAASqB,MAAb,EAAqB;AACnBC,UAAAA,MAAM,CAACC,IAAP,CAAYX,KAAZ,EAAmBA,KAAnB;AACA;AACD,SAHD,MAGO,IAAIhB,KAAI,CAAC4B,KAAL,KAAe,KAAf,IAAwB,CAACxC,YAAY,CAAC4B,KAAD,CAArC,IAAgD,CAAC5B,YAAY,CAACgC,KAAD,CAAjE,EAA0E;AAC/EjC,UAAAA,KAAK,CAACkB,MAAN,CAAa,SAAb,EAAwB;AACtBe,YAAAA,KAAK,EAAEA,KADe;AAEtBJ,YAAAA,KAAK,EAAEA,KAFe;AAGtBa,YAAAA,MAAM,EAAEhC,EAAE,CAACgC,MAHW;AAItBzB,YAAAA,KAAK,EAAEP,EAAE,CAACO,KAJY;AAKtB0B,YAAAA,QAAQ,EAAC,KALa;AAMtBN,YAAAA,KAAK,EAACA,KANgB;AAOtBxB,YAAAA,IAAI,EAAG,YAAM;AACX,kBAAI,CAACuB,IAAL,EAAW;AACT,uBAAOvB,KAAP;AACD;;AACD,qBAAO;AACLuB,gBAAAA,IAAI,EAAEA;AADD,eAAP;AAGD,aAPK,EAPgB;AAetBQ,YAAAA,KAAK,EAAE7C,MAAM,CAACoC,WAAP,CAAmBS,KAAnB,IAA4B;AAfb,WAAxB;AAiBD;;AACDhC,QAAAA,IAAI;AACL;AACF;AACF,GAjDD,MAiDO;AACL;AACA,QAAIC,IAAI,CAACgC,MAAL,KAAgB,KAApB,EAA2B;AACzBjC,MAAAA,IAAI;AACL,KAFD,MAEO;AACLS,MAAAA,OAAO,CAACC,GAAR,CAAY,wBAAuBZ,EAAE,CAACU,IAAtC;AACAR,MAAAA,IAAI,CAAC,QAAD,CAAJ;AACD;AACF;AACF,CA/DD;AAiEAb,MAAM,CAAC+C,SAAP,CAAiB,YAAM;AACrB3C,EAAAA,SAAS,CAAC4C,IAAV;AACA,MAAIC,KAAK,GAAGhD,KAAK,CAACO,OAAN,CAAc0C,GAAd,CAAkBhB,KAA9B;AACA,MAAIG,IAAI,GAAGpC,KAAK,CAACO,OAAN,CAAc0C,GAAd,CAAkBpC,IAAlB,CAAuBuB,IAAlC;AACAY,EAAAA,KAAK,GAAGjD,MAAM,CAACoC,WAAP,CAAmBe,aAAnB,CAAiCF,KAAjC,EAAwCZ,IAAxC,CAAR,CAJqB,CAKrB;;AACArC,EAAAA,MAAM,CAACoC,WAAP,CAAmBgB,QAAnB,CAA4BH,KAA5B;AACD,CAPD","sourcesContent":["/**\r\n * 全站权限配置\r\n * \r\n */\r\nimport router from './router/router'\r\nimport store from './store'\r\nimport { validatenull } from '@/util/validate'\r\nimport { getToken } from '@/util/auth'\r\nimport NProgress from 'nprogress' // progress bar\r\nimport 'nprogress/nprogress.css' // progress bar style\r\nNProgress.configure({ showSpinner: false });\r\nconst lockPage = store.getters.website.lockPage; //锁屏页\r\nrouter.beforeEach((to, from, next) => {\r\n  const meta = to.meta || {};\r\n  const isMenu = meta.menu === undefined ? to.query.menu : meta.menu;\r\n  store.commit('SET_IS_MENU', isMenu === undefined);\r\n\r\n  if (getToken()) {\r\n    if (store.getters.isLock && to.path != lockPage) { //如果系统激活锁屏，全部跳转到锁屏页\r\n      next({ path: lockPage })\r\n    } else if (to.path === '/login') { //如果登录成功访问登录页跳转到主页\r\n      console.log(\"【Permission】 1: To \" +to.path);\r\n      next({ path: '/' })\r\n    } else {\r\n      //如果用户信息为空则获取用户信息，获取用户信息失败，跳转到登录页\r\n      if (store.getters.roles.length === 0) {\r\n        store.dispatch('GetUserInfo').then(() => {\r\n          next({ ...to, replace: true })\r\n        }).catch(() => {\r\n          store.dispatch('FedLogOut').then(() => {\r\n            // alert(\"获取用户信息异常！\");\r\n            console.log(\"【Permission】 2: To \" +to.path);\r\n            next({ path: '/login' })\r\n          })\r\n        })\r\n      } else {\r\n        const value = (to.query.src || to.fullPath) + to.hash;\r\n        const label = to.query.name || to.name;\r\n        const meta = to.meta || router.$avueRouter.meta || {};\r\n        const i18n = to.query.i18n;\r\n        const topId = to.query.topId || ''\r\n        if (to.query.target) {\r\n          window.open(value, value)\r\n          return\r\n        } else if (meta.isTab !== false && !validatenull(value) && !validatenull(label)) {\r\n          store.commit('ADD_TAG', {\r\n            label: label,\r\n            value: value,\r\n            params: to.params,\r\n            query: to.query,\r\n            saveFlag:false,\r\n            topId:topId,\r\n            meta: (() => {\r\n              if (!i18n) {\r\n                return meta\r\n              }\r\n              return {\r\n                i18n: i18n\r\n              }\r\n            })(),\r\n            group: router.$avueRouter.group || []\r\n          });\r\n        }\r\n        next()\r\n      }\r\n    }\r\n  } else {\r\n    //判断是否需要认证，没有登录访问去登录页\r\n    if (meta.isAuth === false) {\r\n      next()\r\n    } else {\r\n      console.log(\"【Permission】 3: To \" +to.path);\r\n      next('/login')\r\n    }\r\n  }\r\n})\r\n\r\nrouter.afterEach(() => {\r\n  NProgress.done();\r\n  let title = store.getters.tag.label;\r\n  let i18n = store.getters.tag.meta.i18n;\r\n  title = router.$avueRouter.generateTitle(title, i18n)\r\n  //根据当前的标签也获取label的值动态设置浏览器标题\r\n  router.$avueRouter.setTitle(title);\r\n});"]}]}