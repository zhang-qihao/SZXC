{"remainingRequest":"C:\\Users\\10415\\Desktop\\0工程\\5Vue\\SZYBGZDTGL-avue\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\10415\\Desktop\\0工程\\5Vue\\SZYBGZDTGL-avue\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\10415\\Desktop\\0工程\\5Vue\\SZYBGZDTGL-avue\\src\\router\\avue-router.js","dependencies":[{"path":"C:\\Users\\10415\\Desktop\\0工程\\5Vue\\SZYBGZDTGL-avue\\src\\router\\avue-router.js","mtime":1655442340381},{"path":"C:\\Users\\10415\\Desktop\\0工程\\5Vue\\SZYBGZDTGL-avue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\10415\\Desktop\\0工程\\5Vue\\SZYBGZDTGL-avue\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\10415\\Desktop\\0工程\\5Vue\\SZYBGZDTGL-avue\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.regexp.constructor\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.string.includes\";\n\nvar RouterPlugin = function RouterPlugin() {\n  this.$router = null;\n  this.$store = null;\n};\n\nRouterPlugin.install = function (vue) {\n  var _this = this;\n\n  var option = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  this.$router = option.router;\n  this.$store = option.store;\n  this.$vue = new vue({\n    i18n: option.i18n\n  });\n\n  function isURL(s) {\n    if (s.includes('html')) return true;\n    return /^http[s]?:\\/\\/.*/.test(s);\n  }\n\n  function objToform(obj) {\n    console.log(obj);\n    var result = [];\n    Object.keys(obj).forEach(function (ele) {\n      result.push(\"\".concat(ele, \"=\").concat(obj[ele]));\n    });\n    return result.join('&');\n  }\n\n  this.$router.$avueRouter = {\n    //全局配置\n    $website: this.$store.getters.website,\n    group: '',\n    meta: {},\n    safe: this,\n    // 设置标题\n    setTitle: function setTitle(title) {\n      var defaultTitle = _this.$vue.$t('title'); // title = title ? `${title}——${defaultTitle}` : defaultTitle;\n\n\n      title = defaultTitle;\n      document.title = title;\n    },\n    closeTag: function closeTag(value) {\n      var tag = value || _this.$store.getters.tag;\n\n      if (typeof value === 'string') {\n        tag = _this.$store.getters.tagList.filter(function (ele) {\n          return ele.value === value;\n        })[0];\n      }\n\n      _this.$store.commit('DEL_TAG', tag);\n    },\n    generateTitle: function generateTitle(title, key) {\n      if (!key) return title;\n\n      var hasKey = _this.$vue.$te('route.' + key);\n\n      if (hasKey) {\n        // $t :this method from vue-i18n, inject in @/lang/index.js\n        var translatedTitle = _this.$vue.$t('route.' + key);\n\n        return translatedTitle;\n      }\n\n      return title;\n    },\n    //处理路由\n    getPath: function getPath() {\n      var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var meta = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var src = params.src;\n      var result = src || '/';\n\n      if (isURL(src)) {\n        result = \"/myiframe/urlPath?\".concat(objToform(Object.assign(meta, params)));\n      }\n\n      return result;\n    },\n    //正则处理路由\n    vaildPath: function vaildPath(list, path) {\n      var result = false;\n      list.forEach(function (ele) {\n        if (new RegExp(\"^\" + ele + \".*\", \"g\").test(path)) {\n          result = true;\n        }\n      });\n      return result;\n    },\n    //设置路由值\n    getValue: function getValue(route) {\n      var value = \"\";\n\n      if (route.query.src) {\n        value = route.query.src;\n      } else {\n        value = route.path;\n      }\n\n      return value;\n    },\n    //动态路由\n    formatRoutes: function formatRoutes() {\n      var _this2 = this;\n\n      var aMenu = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      var first = arguments.length > 1 ? arguments[1] : undefined;\n      var aRouter = [];\n      var propsConfig = this.$website.menu.props;\n      var propsDefault = {\n        label: propsConfig.label || 'label',\n        path: propsConfig.path || 'path',\n        icon: propsConfig.icon || 'icon',\n        children: propsConfig.children || 'children',\n        meta: propsConfig.meta || 'meta'\n      };\n      if (aMenu.length === 0) return;\n\n      var _loop = function _loop(i) {\n        var oMenu = aMenu[i];\n\n        var path = function () {\n          if (first) {\n            return oMenu[propsDefault.path].replace('/index', '');\n          } else {\n            return oMenu[propsDefault.path];\n          }\n        }(),\n            _component = oMenu.component,\n            name = oMenu[propsDefault.label],\n            icon = oMenu[propsDefault.icon],\n            children = oMenu[propsDefault.children],\n            meta = oMenu[propsDefault.meta] || {};\n\n        meta = Object.assign(meta, function () {\n          if (option.keepAlive === true) {\n            return {\n              keepAlive: true\n            };\n          }\n        }());\n        var isChild = children && children.length !== 0;\n        var oRouter = {\n          path: path,\n          component: function component(resolve) {\n            // 判断是否为首路由\n            if (first) {\n              require(['../page/index'], resolve);\n\n              return; // 判断是否为多层路由\n            } else if (isChild && !first) {\n              require(['../page/index/layout'], resolve);\n\n              return; // 判断是否为最终的页面视图\n            } else {\n              if (_component.indexOf(\"http://\") >= 0 || _component.indexOf(\"https://\") >= 0) {\n                require([\"\".concat(_component)], resolve);\n              } else {\n                require([\"../\".concat(_component, \".vue\")], resolve);\n              }\n            }\n          },\n          name: name,\n          icon: icon,\n          meta: meta,\n          redirect: function () {\n            if (!isChild && first && !isURL(path)) return \"\".concat(path, \"/index\");else return '';\n          }(),\n          // 处理是否为一级路由\n          children: !isChild ? function () {\n            if (first) {\n              if (!isURL(path)) oMenu[propsDefault.path] = \"\".concat(path, \"/index\");\n\n              if (_component.indexOf(\"http://\") >= 0 || _component.indexOf(\"https://\") >= 0) {\n                return [{\n                  component: function component(resolve) {\n                    require([\"\".concat(_component)], resolve);\n                  },\n                  icon: icon,\n                  name: name,\n                  meta: meta,\n                  path: 'index'\n                }];\n              } else {\n                return [{\n                  component: function component(resolve) {\n                    require([\"../\".concat(_component, \".vue\")], resolve);\n                  },\n                  icon: icon,\n                  name: name,\n                  meta: meta,\n                  path: 'index'\n                }];\n              }\n            }\n\n            return [];\n          }() : function () {\n            return _this2.formatRoutes(children, false);\n          }()\n        };\n        aRouter.push(oRouter);\n      };\n\n      for (var i = 0; i < aMenu.length; i++) {\n        _loop(i);\n      }\n\n      if (first) {\n        this.safe.$router.addRoutes(aRouter);\n      } else {\n        return aRouter;\n      }\n    },\n    //动态路由\n    formatviewsRoutes: function formatviewsRoutes() {\n      var _this3 = this;\n\n      var aMenu = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      var first = arguments.length > 1 ? arguments[1] : undefined;\n      var aRouter = [];\n      if (aMenu.length === 0) return;\n\n      var _loop2 = function _loop2(i) {\n        var oMenu = aMenu[i];\n        var isChild = oMenu.children.length > 0;\n        var oRouter = {\n          path: oMenu.path,\n          component: function component(resolve) {\n            // 判断是否为首路由\n            if (first) {\n              require(['../page/index'], resolve);\n\n              return; // 判断是否为多层路由\n            } else if (isChild && !first) {\n              require(['../page/index/layout'], resolve);\n\n              return;\n            } else {\n              require([\"@/\".concat(oMenu.component, \".vue\")], resolve);\n\n              return;\n            }\n          },\n          name: oMenu.name,\n          meta: oMenu.meta,\n          redirect: function () {\n            if (isChild && first) return \"\".concat(oMenu.redirect);else return '';\n          }(),\n          // 处理是否为一级路由\n          children: !isChild ? function () {\n            if (first) {\n              return [{\n                component: function component(resolve) {\n                  require([\"\".concat(oMenu.component)], resolve);\n                },\n                name: oMenu.name,\n                meta: oMenu.meta,\n                path: oMenu.path\n              }];\n            }\n\n            return [];\n          }() : function () {\n            return _this3.formatviewsRoutes(oMenu.children, false);\n          }()\n        };\n        aRouter.push(oRouter);\n      };\n\n      for (var i = 0; i < aMenu.length; i++) {\n        _loop2(i);\n      }\n\n      if (first) {\n        this.safe.$router.addRoutes(aRouter);\n      } else {\n        return aRouter;\n      }\n    }\n  };\n};\n\nexport default RouterPlugin;",{"version":3,"sources":["C:/Users/10415/Desktop/0工程/5Vue/SZYBGZDTGL-avue/src/router/avue-router.js"],"names":["RouterPlugin","$router","$store","install","vue","option","router","store","$vue","i18n","isURL","s","includes","test","objToform","obj","console","log","result","Object","keys","forEach","ele","push","join","$avueRouter","$website","getters","website","group","meta","safe","setTitle","title","defaultTitle","$t","document","closeTag","value","tag","tagList","filter","commit","generateTitle","key","hasKey","$te","translatedTitle","getPath","params","src","assign","vaildPath","list","path","RegExp","getValue","route","query","formatRoutes","aMenu","first","aRouter","propsConfig","menu","props","propsDefault","label","icon","children","length","i","oMenu","replace","component","name","keepAlive","isChild","oRouter","resolve","require","indexOf","redirect","addRoutes","formatviewsRoutes"],"mappings":"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","sourcesContent":["\r\nlet RouterPlugin = function () {\r\n    this.$router = null;\r\n    this.$store = null;\r\n\r\n};\r\nRouterPlugin.install = function (vue, option = {}) {\r\n    this.$router = option.router;\r\n    this.$store = option.store;\r\n    this.$vue = new vue({ i18n: option.i18n });\r\n    function isURL (s) {\r\n        if (s.includes('html')) return true;\r\n        return /^http[s]?:\\/\\/.*/.test(s)\r\n    }\r\n    function objToform (obj) {\r\n        console.log(obj)\r\n        let result = [];\r\n        Object.keys(obj).forEach(ele => {\r\n            result.push(`${ele}=${obj[ele]}`);\r\n        })\r\n        return result.join('&');\r\n    }\r\n    this.$router.$avueRouter = {\r\n        //全局配置\r\n        $website: this.$store.getters.website,\r\n        group: '',\r\n        meta: {},\r\n        safe: this,\r\n        // 设置标题\r\n        setTitle: (title) => {\r\n            const defaultTitle = this.$vue.$t('title');\r\n            // title = title ? `${title}——${defaultTitle}` : defaultTitle;\r\n            title = defaultTitle;\r\n            document.title = title;\r\n        },\r\n        closeTag: (value) => {\r\n            let tag = value || this.$store.getters.tag;\r\n            if (typeof value === 'string') {\r\n                tag = this.$store.getters.tagList.filter(ele => ele.value === value)[0]\r\n            }\r\n            this.$store.commit('DEL_TAG', tag)\r\n        },\r\n        generateTitle: (title, key) => {\r\n            if (!key) return title;\r\n            const hasKey = this.$vue.$te('route.' + key)\r\n            if (hasKey) {\r\n                // $t :this method from vue-i18n, inject in @/lang/index.js\r\n                const translatedTitle = this.$vue.$t('route.' + key)\r\n\r\n                return translatedTitle\r\n            }\r\n            return title\r\n        },\r\n        //处理路由\r\n        getPath: function (params = {}, meta = {}) {\r\n            let { src } = params;\r\n            let result = src || '/';\r\n            if (isURL(src)) {\r\n                result = `/myiframe/urlPath?${objToform(Object.assign(meta, params))}`;\r\n            }\r\n            return result;\r\n        },\r\n        //正则处理路由\r\n        vaildPath: function (list, path) {\r\n            let result = false;\r\n            list.forEach(ele => {\r\n                if (new RegExp(\"^\" + ele + \".*\", \"g\").test(path)) {\r\n                    result = true\r\n                }\r\n\r\n            })\r\n            return result;\r\n        },\r\n        //设置路由值\r\n        getValue: function (route) {\r\n            let value = \"\";\r\n            if (route.query.src) {\r\n                value = route.query.src;\r\n            } else {\r\n                value = route.path;\r\n            }\r\n            return value;\r\n        },\r\n        //动态路由\r\n        formatRoutes: function (aMenu = [], first) {\r\n            const aRouter = []\r\n            const propsConfig = this.$website.menu.props;\r\n            const propsDefault = {\r\n                label: propsConfig.label || 'label',\r\n                path: propsConfig.path || 'path',\r\n                icon: propsConfig.icon || 'icon',\r\n                children: propsConfig.children || 'children',\r\n                meta: propsConfig.meta || 'meta',\r\n            }\r\n            if (aMenu.length === 0) return;\r\n            for (let i = 0; i < aMenu.length; i++) {\r\n                const oMenu = aMenu[i];\r\n                let path = (() => {\r\n                        if (first) {\r\n                            return oMenu[propsDefault.path].replace('/index', '')\r\n                        } else {\r\n                            return oMenu[propsDefault.path]\r\n                        }\r\n                    })(),\r\n                    component = oMenu.component,\r\n                    name = oMenu[propsDefault.label],\r\n                    icon = oMenu[propsDefault.icon],\r\n                    children = oMenu[propsDefault.children],\r\n                    meta = oMenu[propsDefault.meta] || {}\r\n\r\n                meta = Object.assign(meta, (function () {\r\n                    if (option.keepAlive === true) {\r\n                        return {\r\n                            keepAlive: true\r\n                        }\r\n                    }\r\n                })());\r\n                const isChild = children && children.length !== 0;\r\n                const oRouter = {\r\n                    path: path,\r\n                    component (resolve) {\r\n                        // 判断是否为首路由\r\n                        if (first) {\r\n                            require(['../page/index'], resolve)\r\n                            return\r\n                            // 判断是否为多层路由\r\n                        } else if (isChild && !first) {\r\n                            require(['../page/index/layout'], resolve)\r\n                            return\r\n                            // 判断是否为最终的页面视图\r\n                        } else {\r\n                            if(component.indexOf(\"http://\")>=0||component.indexOf(\"https://\")>=0){\r\n                                require([`${component}`], resolve)\r\n                            }else {\r\n                                require([`../${component}.vue`], resolve)\r\n                            }\r\n                        }\r\n                    },\r\n                    name: name,\r\n                    icon: icon,\r\n                    meta: meta,\r\n                    redirect: (() => {\r\n                        if (!isChild && first && !isURL(path)) return `${path}/index`\r\n                        else return '';\r\n                    })(),\r\n                    // 处理是否为一级路由\r\n                    children: !isChild ? (() => {\r\n                        if (first) {\r\n                            if (!isURL(path)) oMenu[propsDefault.path] = `${path}/index`;\r\n                            if(component.indexOf(\"http://\")>=0||component.indexOf(\"https://\")>=0){\r\n                                return [{\r\n                                    component(resolve) {\r\n                                        require([`${component}`], resolve)\r\n                                    },\r\n                                    icon: icon,\r\n                                    name: name,\r\n                                    meta: meta,\r\n                                    path: 'index',\r\n                                }];\r\n                            }else {\r\n                                return [{\r\n                                    component(resolve) {\r\n                                        require([`../${component}.vue`], resolve)\r\n                                    },\r\n                                    icon: icon,\r\n                                    name: name,\r\n                                    meta: meta,\r\n                                    path: 'index',\r\n                                }];\r\n                            }\r\n                        }\r\n                        return [];\r\n                    })() : (() => {\r\n                        return this.formatRoutes(children, false)\r\n                    })()\r\n                }\r\n                aRouter.push(oRouter)\r\n            }\r\n            if (first) {\r\n                this.safe.$router.addRoutes(aRouter)\r\n            } else {\r\n                return aRouter\r\n            }\r\n\r\n        },\r\n\r\n        //动态路由\r\n        formatviewsRoutes: function (aMenu = [], first) {\r\n            const aRouter = []\r\n            if (aMenu.length === 0) return;\r\n            for (let i = 0; i < aMenu.length; i++) {\r\n                const oMenu = aMenu[i];\r\n                const isChild = oMenu.children.length > 0;\r\n                const oRouter = {\r\n                    path: oMenu.path,\r\n                    component (resolve) {\r\n                        // 判断是否为首路由\r\n                        if (first) {\r\n                            require(['../page/index'], resolve)\r\n                            return\r\n                            // 判断是否为多层路由\r\n                        } else if (isChild && !first) {\r\n                            require(['../page/index/layout'], resolve)\r\n                            return\r\n                        }else{\r\n                            require([`@/${oMenu.component}.vue`], resolve)\r\n                            return\r\n                        }\r\n                    },\r\n                    name: oMenu.name,\r\n                    meta: oMenu.meta,\r\n                    redirect: (() => {\r\n                        if (isChild && first) return `${oMenu.redirect}`\r\n                        else return '';\r\n\r\n                    })(),\r\n                    // 处理是否为一级路由\r\n                    children: !isChild ? (() => {\r\n                        if (first) {\r\n                            return [{\r\n                                component(resolve) {\r\n                                    require([`${oMenu.component}`], resolve)\r\n                                },\r\n                                name: oMenu.name,\r\n                                meta: oMenu.meta,\r\n                                path: oMenu.path\r\n                            }];\r\n                        }\r\n                        return [];\r\n                    })() : (() => {\r\n                        return this.formatviewsRoutes(oMenu.children, false)\r\n                    })()\r\n                }\r\n                aRouter.push(oRouter)\r\n            }\r\n            if (first) {\r\n                this.safe.$router.addRoutes(aRouter)\r\n            } else {\r\n                return aRouter\r\n            }\r\n        }\r\n\r\n    }\r\n}\r\nexport default RouterPlugin;"]}]}