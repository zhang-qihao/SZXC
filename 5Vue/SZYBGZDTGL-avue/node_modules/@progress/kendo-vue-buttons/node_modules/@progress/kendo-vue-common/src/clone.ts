/**
 * @hidden
 */
export const cloneDate = (date?: Date): Date | null => date ? new Date(date.getTime()) : null;

/**
 * @hidden
 */
export function clone(obj: any): any {
    const result = {};
    cloneObject(obj, result);

    return result;
}

/**
 * @hidden
 */
export function cloneObject(obj: any, result: any): void {
    for (let field in obj) {
        if (obj.hasOwnProperty(field)) {
            const value = obj[field];

            result[field] = cloneValue(value, result[field]);
        }
    }
}

/**
 * @hidden
 */
export function cloneValue(value: any, nextValue: any) {
    if (Array.isArray(value)) {
        return cloneArray(value);
    } else if (value instanceof Date) {
        return cloneDate(value);
    } else if (value && typeof value === 'object') {
        const newNextValue = nextValue || {};
        cloneObject(value, newNextValue);
        return newNextValue;
    } else {
        return value;
    }
}

/**
 * @hidden
 */
export function cloneArray(array: any[]): any {
    return array.map(value => cloneValue(value, undefined));
}
